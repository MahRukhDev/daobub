"use strict";(self.webpackChunk_1inch=self.webpackChunk_1inch||[]).push([[2507],{64074:(ht,ie,o)=>{o.d(ie,{M:()=>B});var u=o(38143),S=o(31777),K=o(92872),b=o(56739),oe=o(65687),U=o(64925),_=o(24022),z=o(91066),C=o(51109);let B=(()=>{class k{}return k.\u0275fac=function(ae){return new(ae||k)},k.\u0275mod=C.\u0275\u0275defineNgModule({type:k}),k.\u0275inj=C.\u0275\u0275defineInjector({imports:[u.ez,S.ReactiveFormsModule,U.h,K.ot,z.E,oe.m,_.Z,b.U]}),k})()},12507:(ht,ie,o)=>{o.r(ie),o.d(ie,{SwapPageContainerModule:()=>na});var u=o(38143),S=o(31777),K=o(92872),b=o(77065),oe=o(77370),U=o(54266),_=o(54510),z=o(84093),C=o(12725),B=o(74578),k=o(68530),le=o(23963),ae=o(33358),vt=o(13748),de=o(65687),ft=o(64925),wt=o(25305),Ct=o(65672),St=o(53842),xt=o(3493),yt=o(59226),Pt=o(64977),_e=o(31152),Oe=o(16785),Tt=o(33039),Ie=o(14806),bt=o(34289),_t=o(92356),Ot=o(47540),It=o(3227),Me=o(64074),Mt=o(38783),ke=o(10546),$e=o(10047),je=o(28465),kt=o(62139),$t=o(44849),Ee=o(91066),jt=o(6904),Et=o(41852),Ft=o(9516),At=o(586),Bt=o(38073),Dt=o(42585),Qt=o(83517),e=o(51109),Fe=o(9300),Ae=o(2861),H=o(30921),Be=o(83259),X=o(40475),x=o(140),De=o(64057),$=o(76027),j=o(3012),me=o(71909),E=o(83358),y=o(76327),Z=o(17114),f=o(64736),se=o(91488),I=o(68751),Rt=o(56284),Qe=o(18992),F=o(36565),Re=o(44432),Ut=o(22406),O=o(24124),Ue=o(42716),V=o(69064),ue=o(34377);let Ve=(()=>{class n{constructor(t,i,a,r,c,d,m,l){this.swapQuery=t,this.gasPriceQuery=i,this.swapPriceImpactService=a,this.swapContextService=r,this.activeConnectionQuery=c,this.swapFeesService=d,this.swapSettingsQuery=m,this.swapSlippageService=l}buildSwapSnapshot(){return this.swapQuery.swapInfo$.pipe((0,I.h)(t=>!!t.destinationTokenAmount),(0,f.U)(t=>{const{callData:i}=this.swapQuery.getValue(),a=this.swapSlippageService.getSlippageToleranceLastValue(),r=(0,se.L_)(t.destinationToken,t.destinationTokenAmount,a),c=this.swapPriceImpactService.getSwapPriceImpact(t),d=(0,se.oJ)(t.destinationTokenAmount,r),m=this.swapFeesService.getPartnersFees(t.sourceTokenAmount,t.sourceToken);return{swapData:t,swapPriceImpact:c,receivedAmountSlippage:d,slippageTolerance:a,isHighSlippageTolerance:(0,se.ed)(d),isHighPriceImpact:this.swapPriceImpactService.isHighPriceImpact(c),isExtremePriceImpact:this.swapPriceImpactService.isExtremePriceImpact(c),minReceivedTokenAmount:r,isLedgerLive:Rt.j.getValue(),isUnoSwap:(0,se.Yi)(i),txTypeSwitchParams:this.getTxTypeSwitchParams(),showSwapType:this.swapContextService.showSwapType,showTxCost:this.swapContextService.showTxCost,gasPriceAdvanced:this.gasPriceQuery.getValue().advanced,partnerFees:m||void 0,estimateWith99SlippageEnabled:!1}}))}getTxTypeSwitchParams(){if(!this.activeConnectionQuery.isChainSupportEIP1559)return null;const{gasLimit:t}=this.swapQuery.getValue(),{advanced:i}=this.gasPriceQuery.getValue();return(0,Qe.bM)(t||0,(0,Qe.aY)(this.gasPriceQuery.getCurrentGasPrice()),i)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(x._),e.\u0275\u0275inject(F.j),e.\u0275\u0275inject(Re.f),e.\u0275\u0275inject(Ut.Z),e.\u0275\u0275inject(O.r),e.\u0275\u0275inject(Ue.$),e.\u0275\u0275inject(V.G),e.\u0275\u0275inject(ue.j))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();var J=o(70923),Le=o(73592),Y=o(29737),L=o(53886),Vt=o(30606),ge=o(1753),q=o(12733),D=o(35878),Lt=o(30459),Ge=o(69682),h=o(77724),Gt=o(46272),ee=o(93130),We=o(68534),ze=o(68435),he=o(97202),Ne=o(20803),Ke=o(52275),Wt=o(41880),zt=o(88440);let Nt=(()=>{class n extends Ke.AE{constructor(t){super(t),this.store=t}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(zt.NV))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:Wt.z}),n})();var ve=o(68856),te=o(98396),Kt=o(63362),He=o(45461),Ht=o(50043),Xt=o(83627);let Zt=(()=>{class n{constructor(t,i,a,r,c){this.swapStore=t,this.swapQuery=i,this.pricesQuery=a,this.gasPriceQuery=r,this.alternativesBuilderService=c}updateStoreByPathfinderResponse(t){(0,Ke.Y0)(()=>{const{state:i,accumulator:a}=t;a.timing.forEach(r=>(0,De.H)(r.start?new Date(r.start):void 0)),this.swapStore.update({timing:a.timing}),i&&this.swapStore.update(i)})}updateAlternatives(t){var i,a;const r=null===(i=t.bestDescriptor)||void 0===i?void 0:i.response,{sourceTokenAmount:c,destinationToken:d}=this.swapQuery.getValue(),{destinationTokenAmountTruncated:m,txCostInEther:l,destinationTokenAmount:p}=this.swapQuery.getValue(),g={destinationTokenAmountTruncated:m,txCostInEther:l,sourceTokenAmount:c,destinationTokenAmount:p,destinationToken:d,isDestinationTokenNative:(0,He.M)(d.address),gasPriceWei:this.gasPriceQuery.getCurrentGasPrice()},w=null===(a=this.swapQuery.dstValueInUsd)||void 0===a?void 0:a.net,P=this.alternativesBuilderService.buildAlternativesState(g,null==r?void 0:r.results,w,this.pricesQuery.eth2UsdPrice);if(!P)return;const{oneInch:M,uiItemsSorted:A}=P,T=A.length?A[0]:{};this.swapStore.update({alternatives:[M,...A],oneInch:M,bestAlternativeToOneInch:T})}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(ve.X),e.\u0275\u0275inject(x._),e.\u0275\u0275inject(Ne.u),e.\u0275\u0275inject(F.j),e.\u0275\u0275inject(Xt.v))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:Ht.r}),n})();var re=o(83140);let Q=(()=>{class n{constructor(t,i,a,r,c,d,m,l,p,g,w,P,M,A){this.activeConnectionQuery=t,this.walletConnectionQuery=i,this.web3ProvidersService=a,this.globalSettingsQuery=r,this.liquiditySourcesQuery=c,this.gasPriceQuery=d,this.tokenPricesQuery=m,this.swapSettingsQuery=l,this.advancedSettingsQuery=p,this.swapQuery=g,this.swapStore=w,this.swapConfirmTxService=P,this.pathfinderQuoteService=M,this.swapStoreUpdaterService=A,this.manualRefresh$=new $.X(void 0),this.isForceRequestInProgress$=new $.X(!1),this.isScheduledRequestInProgress$=new $.X(!1),this.pathfinderForceRequestTriggers$=(0,L.a)({isWindowActive:(0,Le.M)().pipe((0,I.h)(T=>T),(0,q.O)(!0)),manualRefresh:this.manualRefresh$,swapData:this.swapQuery.tradeParams$.pipe((0,D.x)(Y.fS0)),showTables:this.globalSettingsQuery.showTables$,walletAddress:this.walletConnectionQuery.connectedWalletAddress$,pathfinderPreset:this.swapSettingsQuery.pathfinderPreset$,gasPriceChanged:this.swapSettingsQuery.gasPrice$.pipe((0,D.x)(Y.fS0))}).pipe((0,Lt.g)(0),(0,I.h)(()=>!this.swapConfirmTxService.confirmSwapInProgress),(0,Ge.d)({refCount:!0,bufferSize:1})),this.pathfinderScheduledRequestTriggers$=(0,L.a)({timer:this.activeConnectionQuery.currentChainBackgroundQuotes$.pipe((0,y.w)(T=>(0,Vt.H)(T,T)))}).pipe((0,I.h)(()=>!this.swapConfirmTxService.confirmSwapInProgress),(0,Ge.d)({refCount:!0,bufferSize:1}),(0,h.b)(T=>{re.log(`pathfinder scheduled request triggers time: ${Date.now()}`)})),this.pathfinderRequests$=(0,ge.T)(this.pathfinderForceRequestTriggers$.pipe((0,h.b)(T=>{re.log("[Classic swap] Force pathfinder request: ",T),this.resetSwapStore(),this.isForceRequestInProgress$.next(!0)})),this.pathfinderScheduledRequestTriggers$.pipe((0,h.b)(T=>{re.log("[Classic swap] Scheduled pathfinder request: ",T),this.isScheduledRequestInProgress$.next(!0)})))}init(){return this.pathfinderRequests$.pipe((0,I.h)(()=>{const{sourceTokenAmount:t}=this.swapQuery;return(0,Le.N)()&&"0"!==t&&!!t&&!this.swapConfirmTxService.confirmSwapInProgress}),(0,y.w)(()=>this.gasPriceQuery.currentGasPrice$.pipe((0,I.h)(t=>!!t),(0,E.q)(1),(0,Z.K)(()=>(0,j.of)(0)),(0,y.w)(()=>this.liquiditySourcesQuery.selectActiveId().pipe((0,I.h)(t=>!!t&&t.length>0),(0,E.q)(1))))),(0,y.w)(()=>(re.log("[Classic swap] Perform pathfinder request"),this.requestPathfinder().pipe((0,Z.K)(()=>(0,j.of)(null))))),(0,h.b)(()=>{this.isForceRequestInProgress$.next(!1),this.isScheduledRequestInProgress$.next(!1)}))}requestPathfinder(){return this.pathfinderQuoteService.findSwapWithPathFinder$(this.getPathfinderQuoteRequestParams(),this.gasPriceQuery.getCurrentGasPrice(),this.tokenPricesQuery.eth2UsdPrice).pipe((0,E.q)(1),(0,h.b)(t=>{this.swapStoreUpdaterService.updateStoreByPathfinderResponse(t),this.globalSettingsQuery.showTables&&this.swapStoreUpdaterService.updateAlternatives(t.accumulator),this.isForceRequestInProgress$.next(!1)}),(0,Z.K)(t=>(this.isForceRequestInProgress$.next(!1),(0,me._)(()=>t))))}getCurrentPathfinderPreset(){return Gt.p[this.activeConnectionQuery.currentChainId]}getPathfinderQuoteRequestParams(){const t=this.globalSettingsQuery.showTables,{sourceToken:i,destinationToken:a,sourceTokenAmount:r}=this.swapQuery.getValue(),c=this.liquiditySourcesQuery.getActiveId()||[],d=this.swapSettingsQuery.pathfinderPreset,m=this.getCurrentPathfinderPreset();return{requestMultipleQuotes:t,sourceToken:i,destinationToken:a,sourceTokenAmount:r,protocolWhiteList:c,connectedWalletAddress:this.walletConnectionQuery.walletAddress||null,pathfinderPreset:d,currentChainPathfinderPreset:m,customPathfinderSettings:this.advancedSettingsQuery.getValue()}}resetSwapStore(){this.swapStore.update({destinationTokenAmount:"",destinationTokenAmountTruncated:"",gasUnitsConsumed:"",gasPriceWei:0,routes:[],bestAlternativeToOneInch:null,timing:[]})}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(O.r),e.\u0275\u0275inject(ee.r),e.\u0275\u0275inject(We.v),e.\u0275\u0275inject(ze.J),e.\u0275\u0275inject(he.F),e.\u0275\u0275inject(F.j),e.\u0275\u0275inject(Ne.u),e.\u0275\u0275inject(V.G),e.\u0275\u0275inject(Nt),e.\u0275\u0275inject(x._),e.\u0275\u0275inject(ve.X),e.\u0275\u0275inject(te.C),e.\u0275\u0275inject(Kt.x),e.\u0275\u0275inject(Zt))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ce=(()=>{class n extends H.B{constructor(t,i,a,r,c){super(),this.swapSnapshotService=t,this.gasPriceQuery=i,this.swapQuery=a,this.swapService=r,this.classicSwapService=c,this.confirmDialogRef$=new $.X(null),this.estimateWith99SlippageEnabled$=new $.X(!1)}set estimateWith99SlippageEnabled(t){this.estimateWith99SlippageEnabled$.next(t)}get estimateWith99SlippageEnabled(){return this.estimateWith99SlippageEnabled$.value}reset(){this.confirmDialogRef$.next(null),this.estimateWith99SlippageEnabled=!1,this.swapService.updateValuesInStore({gasLimit:0})}applySwapBuilderSuccessResponse(){return this.swapSnapshotService.buildSwapSnapshot().pipe((0,E.q)(1),(0,y.w)(t=>{var i;(0,De.W)("Swap snapshot",t);const a=null===(i=this.confirmDialogRef$.value)||void 0===i?void 0:i.componentInstance;return a&&(t.estimateWith99SlippageEnabled=this.estimateWith99SlippageEnabled,a.setSwapSnapshot(t),a.setEstimated(!0),a.isLoading=!1),(0,j.of)(void 0)}),(0,Z.K)(t=>{var i;const a=null===(i=this.confirmDialogRef$.value)||void 0===i?void 0:i.componentInstance;return a&&(a.isLoading=!1),(0,me._)(()=>t)}))}requestPathfinder(){return this.classicSwapService.requestPathfinder().pipe((0,E.q)(1),(0,f.U)(()=>{}))}getGasPriceAdvanced(){return this.gasPriceQuery.getValue().advanced}getSwapConfirmTokensData(){const{sourceToken:t,sourceTokenAmount:i,destinationToken:a}=this.swapQuery.getValue();return{sourceToken:t,sourceTokenAmount:i,destinationToken:a}}navigateToSwapForm(){var t;null===(t=this.confirmDialogRef$.value)||void 0===t||t.close()}beforeSwapTransaction(){this.navigateToSwapForm()}updateDestinationTokenAmount(t){this.swapService.updateDestinationTokenAmount(t)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(Ve),e.\u0275\u0275inject(F.j),e.\u0275\u0275inject(x._),e.\u0275\u0275inject(J.g),e.\u0275\u0275inject(Q))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),Xe=(()=>{class n extends Qt.R{constructor(t,i,a,r,c,d,m,l,p,g){super(t,i,a,c,p,l,g),this.walletService=t,this.tokensPairPriceImpactService=i,this.swapConfirmManagerService=a,this.txCostService=r,this.swapSettingsService=c,this.swapQuery=d,this.classicSwapConfirmService=m,this.swapConfirmTxService=l,this.swapSettingsQuery=p,this.swapSlippageService=g,this.destinationTokenAmount$=this.swapQuery.destinationTokenAmount$,this.destinationToken$=this.swapQuery.destinationToken$,this.fotSwapEnabled$=(0,Dt.K)(this.swapQuery.sourceToken$,this.swapQuery.destinationToken$),this.estimateWith99SlippageEnabled$=this.classicSwapConfirmService.estimateWith99SlippageEnabled$,this.txFeeAmount$=this.txCostService.txFeeAmount$}get txTypeSwitchParams(){var t;return(null===(t=this.swapSnapshot$.value)||void 0===t?void 0:t.txTypeSwitchParams)||null}get isUnoSwap(){var t;return Boolean(null===(t=this.swapSnapshot$.value)||void 0===t?void 0:t.isUnoSwap)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(Fe.X),e.\u0275\u0275inject(Ae.t),e.\u0275\u0275inject(H.GA),e.\u0275\u0275inject(Be.I),e.\u0275\u0275inject(X._),e.\u0275\u0275inject(x._),e.\u0275\u0275inject(ce),e.\u0275\u0275inject(te.C),e.\u0275\u0275inject(V.G),e.\u0275\u0275inject(ue.j))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();var Jt=o(83108),Ze=o(30137),v=o(90813),Je=o(95021),G=o(79296),Yt=o(44863),qt=o(66339),en=o(58903),tn=o(68128),nn=o(10199);let Ye=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-prepare-transaction"]],decls:8,vars:0,consts:[[1,"prepare-transaction-wrap"],["src","/assets/images/loader3.svg"],["transloco","confirmSwap.dialogs.prepare-transaction.text",1,"prepare-transaction-text"],["mat-dialog-actions","",1,"prepare-transaction-close"],["mat-icon-button","","mat-dialog-close",""],["width","24","height","24"],[0,"xlink","href","assets/images/icons/cross.svg#cross"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"img",1),e.\u0275\u0275elementStart(2,"h3",2),e.\u0275\u0275text(3,"Preparing Transaction"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",3)(5,"button",4),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(6,"svg",5),e.\u0275\u0275element(7,"use",6),e.\u0275\u0275elementEnd()()()())},dependencies:[C.KI,K.lW,b.ZT,b.H8],styles:["[_nghost-%COMP%]{display:block;width:100%}.prepare-transaction-wrap[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;height:100%;justify-content:center}.prepare-transaction-close[_ngcontent-%COMP%]{position:absolute;right:8px;top:4px}.prepare-transaction-close[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:var(--1inch-text-01)}.prepare-transaction-text[_ngcontent-%COMP%]{margin-top:32px;text-align:center;font-weight:500;font-size:20px;line-height:23px}"],changeDetection:0}),n})();function on(n,s){1&n&&(e.\u0275\u0275elementStart(0,"div",4),e.\u0275\u0275element(1,"app-prepare-transaction"),e.\u0275\u0275elementEnd())}function an(n,s){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"modal-dialog-header",5),e.\u0275\u0275listener("onCloseClick",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.handleClose())}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"transloco"),e.\u0275\u0275elementEnd()}2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"confirmSwap.title")," "))}function sn(n,s){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"swap-confirmation",6),e.\u0275\u0275listener("onUpdateRates",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.updateRates())})("onRecalculateRoute",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.recalculateRoute())})("onDoSwap",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.doSwap())})("onOpenSettings",function(a){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.handleOpenSettings(a))}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext().tuiLet,i=e.\u0275\u0275nextContext();e.\u0275\u0275property("swapConfirmationData",t)("gasLimit",e.\u0275\u0275pipeBind1(1,5,i.gasLimit$))("txTypeControl",i.txTypeControl)("customGasPriceControl",i.customGasPriceControl)("sendToReceiverControl",i.sendToReceiverControl)}}function rn(n,s){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,on,2,0,"div",1),e.\u0275\u0275template(2,an,3,3,"modal-dialog-header",2),e.\u0275\u0275template(3,sn,2,7,"swap-confirmation",3),e.\u0275\u0275elementContainerEnd()),2&n){const t=s.tuiLet;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!t),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!t)}}let cn=(()=>{class n{constructor(t,i,a,r,c,d,m,l,p,g,w,P,M,A){this.swapService=t,this.changeDetectorRef=i,this.walletService=a,this.swapQuery=r,this.swapSettingsService=c,this.failedEstimationService=d,this.gasPriceQuery=m,this.swapConfirmManagerService=l,this.swapConfirmTxService=p,this.tokensPairPriceImpactService=g,this.swapConfirmationDataService=w,this.classicSwapService=P,this.ensService=M,this.txCostService=A,this.openSettings=new e.EventEmitter,this.onClose=new e.EventEmitter,this.swapConfirmationData$=this.swapConfirmationDataService.getData$(),this.swapSnapshot$=new $.X(null),this.estimated$=new $.X(null),this.estimationStatus$=this.estimated$.pipe((0,Je.BX)(),(0,D.x)(),(0,y.w)(be=>{if(be)return(0,j.of)("estimated");const{sourceToken:ia,sourceTokenAmount:oa,txCostInEther:aa,callData:sa,gasLimit:ra}=this.swapQuery.getValue(),ca=(0,Ze.s5)((+(ra||0)*this.gasPriceQuery.getCurrentGasPrice()).toString());return this.failedEstimationService.isEnoughEthForTx$(ia,oa,ca||aa,sa).pipe((0,f.U)(pa=>pa?"ratesExpired":"notEnoughBalance"))})),this.gasLimit$=this.txCostService.gasLimit$,this.sendToReceiverControl=new S.UntypedFormControl({checked:!1,address:""}),this.txTypeControl=new S.UntypedFormControl(Jt.X.BROADCAST),this.customGasPriceControl=new S.UntypedFormControl,this.customGasPriceUpdateTime=null,this.subscription=new G.w0,this.listenRatesExpired();const T=this.sendToReceiverControl.statusChanges.pipe((0,h.b)(be=>{this.swapConfirmationDataService.isAlternativeReceiverValid$.next("VALID"===be)}));(0,v.O)(T,"isAlternativeReceiverValid$")}set estimated(t){this.estimated$.next(t)}set swapSnapshot(t){this.swapSnapshot$.next(t),this.swapConfirmationDataService.swapSnapshot$.next(t)}get swapSnapshot(){return this.swapSnapshot$.value}get isHighSlippageTolerance(){return this.swapSnapshot.isHighSlippageTolerance}get isExtremePriceImpact(){return this.swapSnapshot.isExtremePriceImpact}ngOnInit(){this.listenPermitExpiration(),this.persistCustomGasPrice()}ngOnDestroy(){this.subscription.unsubscribe()}doSwap(){if(this.customGasPriceUpdateTime&&Date.now()-this.customGasPriceUpdateTime<500||this.sendToReceiverControl.invalid)return;const{address:i=null}=this.sendToReceiverControl.value,r=this.ensService.resolveWalletAddressByEnsName$(i||"").pipe((0,y.w)(c=>this.swapConfirmTxService.confirmSwap(this.swapSnapshot,this.txTypeControl.value,c,this.tokensPairPriceImpactService.swapPriceImpact).pipe((0,Yt.x)(()=>{this.classicSwapService.manualRefresh$.next()}),(0,Z.K)(d=>d instanceof te.G?(this.handleOpenSettings("slippage"),(0,j.of)(null)):(0,me._)(()=>d)))));(0,v.O)(r,"classic doSwap$")}recalculateRoute(){const t=this.swapConfirmManagerService.recalculateRoute();(0,v.O)(t,"recalculateRoute$")}updateRates(){const t=this.swapConfirmManagerService.updateRates({pushAlert:!0}).pipe((0,E.q)(1));(0,v.O)(t,"updateRates$")}setSwapSnapshot(t){this.swapSnapshot=t,this.changeDetectorRef.markForCheck()}handleOpenSettings(t){this.openSettings.emit(t)}handleClose(){this.onClose.emit()}persistCustomGasPrice(){const t=this.customGasPriceControl.valueChanges.pipe((0,h.b)(i=>{this.swapService.setFlashTxGasPrice(i),this.customGasPriceUpdateTime=Date.now()}));(0,v.O)(t,"Classic customGasPriceChanges$",this.subscription)}listenRatesExpired(){const t=this.estimationStatus$.pipe((0,I.h)(i=>"estimated"!==i),(0,D.x)(),(0,y.w)(()=>{const{sourceToken:i,sourceTokenAmount:a,txCostInEther:r,callData:c,revertReason:d,gasLimit:m}=this.swapQuery.getValue(),l=(0,Ze.s5)((+(m||0)*this.gasPriceQuery.getCurrentGasPrice()).toString());return this.failedEstimationService.showFailedEstimationDialog({sourceToken:i,sourceTokenAmount:a,txCostInEther:l||r,callData:c,revertReason:d})}));(0,v.O)(t,"listenEstimation$")}listenPermitExpiration(){const t=this.swapConfirmManagerService.listenPermitExpiration(this.swapQuery.sourceToken$);(0,v.O)(t,"permitExpired$",this.subscription)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(J.g),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(Fe.X),e.\u0275\u0275directiveInject(x._),e.\u0275\u0275directiveInject(X._),e.\u0275\u0275directiveInject(qt.X),e.\u0275\u0275directiveInject(F.j),e.\u0275\u0275directiveInject(H.GA),e.\u0275\u0275directiveInject(te.C),e.\u0275\u0275directiveInject(Ae.t),e.\u0275\u0275directiveInject(Xe),e.\u0275\u0275directiveInject(Q),e.\u0275\u0275directiveInject(en.D),e.\u0275\u0275directiveInject(Be.I))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-confirm-swap"]],inputs:{estimated:"estimated",swapSnapshot:"swapSnapshot"},outputs:{openSettings:"openSettings",onClose:"onClose"},decls:2,vars:3,consts:[[4,"tuiLet"],["class","loading-wrap",4,"ngIf"],[3,"onCloseClick",4,"ngIf"],["contextId","confirm-classic-swap",3,"swapConfirmationData","gasLimit","txTypeControl","customGasPriceControl","sendToReceiverControl","onUpdateRates","onRecalculateRoute","onDoSwap","onOpenSettings",4,"ngIf"],[1,"loading-wrap"],[3,"onCloseClick"],["contextId","confirm-classic-swap",3,"swapConfirmationData","gasLimit","txTypeControl","customGasPriceControl","sendToReceiverControl","onUpdateRates","onRecalculateRoute","onDoSwap","onOpenSettings"]],template:function(t,i){1&t&&(e.\u0275\u0275template(0,rn,4,3,"ng-container",0),e.\u0275\u0275pipe(1,"async")),2&t&&e.\u0275\u0275property("tuiLet",e.\u0275\u0275pipeBind1(1,1,i.swapConfirmationData$))},dependencies:[u.O5,tn.h,nn.w,B.Ls,Ye,u.Ov,C.Ot],styles:["modal-dialog-header[_ngcontent-%COMP%]{display:block;margin-left:-16px;margin-right:-16px}.confirm-swap-dialog-title[_ngcontent-%COMP%]{font-weight:500;font-size:20px;line-height:23px}.confirm-swap-dialog-close[_ngcontent-%COMP%]{position:absolute;right:8px;top:10px}.confirm-swap-dialog-close[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:var(--1inch-text-01)}.confirm-swap-token[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;height:60px;border-radius:16px;padding:16px}.confirm-swap-token-title[_ngcontent-%COMP%]{display:grid;align-items:center;grid-template-columns:28px 1fr;grid-column-gap:8px;min-width:60px}.confirm-swap-token-title[_ngcontent-%COMP%]   token-icon[_ngcontent-%COMP%]{width:30px;height:30px}.confirm-swap-amount[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:right}.confirm-swap-content[_ngcontent-%COMP%]{margin-top:16px}.confirm-swap-arrow[_ngcontent-%COMP%]{margin:4px auto;display:block}.confirm-swap-token-value[_ngcontent-%COMP%]{font-size:24px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-left:16px;text-align:right;margin-top:4px}@media (max-width: 376px){.confirm-swap-token-value[_ngcontent-%COMP%]{font-size:18px}}.confirm-swap-button[_ngcontent-%COMP%]{width:100%;padding:16px;border-radius:12px;background:var(--1inch-common-btn-bg-01);color:var(--1inch-common-text-01)}.confirm-swap-button[_ngcontent-%COMP%]:hover, .confirm-swap-button[_ngcontent-%COMP%]:focus{background:var(--1inch-common-btn-bg-06)}.confirm-swap-button.disabled[_ngcontent-%COMP%]{background:var(--1inch-btn-bg-03);color:var(--1inch__ui-03)}.confirm-swap-info[_ngcontent-%COMP%]{margin-top:20px}.token-swap-info-row[_ngcontent-%COMP%]{width:100%;margin-bottom:8px;display:flex;justify-content:space-between;font-size:13px;line-height:15px}.token-swap-info-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.token-swap-settings-rows[_ngcontent-%COMP%]{margin-bottom:8px}.token-swap-info-price[_ngcontent-%COMP%]{margin-right:6px}.tx-cost-info-row[_ngcontent-%COMP%]{margin-bottom:8px}.private-tx-box[_ngcontent-%COMP%]{padding:14px;background:rgba(47,138,245,.4);border-radius:10px}.private-tx-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{white-space:normal}.private-tx-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;margin-left:28px;text-decoration:underline}.private-tx-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:currentColor}.confirm-swap-warning[_ngcontent-%COMP%]{border-radius:16px;padding:16px;display:grid;grid-template-columns:16px 1fr auto;grid-column-gap:16px;align-items:center;color:var(--1inch-common-bg-04);border:1px solid var(--1inch-common-bg-04)}.switch-tx-type-control[_ngcontent-%COMP%]{display:block;margin-top:16px}@media (min-width: 720px){.confirm-swap-close[_ngcontent-%COMP%]{right:30px;top:34px}.confirm-swap-arrow[_ngcontent-%COMP%]{margin:4px auto}}.warning-box-yellow[_ngcontent-%COMP%]{border:solid 1px var(--1inch-warning-text-02);color:var(--1inch__text-and-icons__warning);background:none}.token-swap-info-title[_ngcontent-%COMP%]{white-space:nowrap;display:block;margin-right:16px}.token-swap-info-value[_ngcontent-%COMP%]{white-space:nowrap;display:flex;overflow:hidden}.token-swap-info-symbol[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:inline-block;min-width:16px}.high-slippage[_ngcontent-%COMP%]{color:var(--1inch__text-and-icons__warning)}.attention-icon[_ngcontent-%COMP%]{margin-left:4px;margin-top:-2px}.small-size[_ngcontent-%COMP%]{font-size:12px}.small-size[_ngcontent-%COMP%]   .attention-icon[_ngcontent-%COMP%]{transform:scale(.75);margin-left:0}send-to-another-address[_ngcontent-%COMP%]{display:block;margin-bottom:16px}.loading-wrap[_ngcontent-%COMP%]{min-height:426px;max-height:90vh;display:flex;justify-content:center;margin:0 -16px -16px}"],changeDetection:0}),n})();var W=o(82868),R=o(33747),fe=o(25221),ne=o(55231);const pn=["confirmForm"];function ln(n,s){1&n&&e.\u0275\u0275element(0,"app-prepare-transaction")}function dn(n,s){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"app-confirm-swap",5,6),e.\u0275\u0275listener("openSettings",function(a){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.openSettings(a))})("onClose",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.handleClose())}),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("estimated",e.\u0275\u0275pipeBind1(3,2,t.estimated$))("swapSnapshot",e.\u0275\u0275pipeBind1(4,4,t.swapSnapshot$))}}function mn(n,s){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"swap-confirm-settings",7),e.\u0275\u0275listener("backButtonClick",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.returnToConfirmFormHandler())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("settingsType",t.settingsDomain)}}function un(n,s){if(1&n&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275template(1,dn,5,6,"ng-container",3),e.\u0275\u0275template(2,mn,2,1,"ng-container",4),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngSwitch",t.currentScreen),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","form")}}let qe=(()=>{class n{constructor(t,i,a,r,c,d){this.destroy$=t,this.matDialog=i,this.swapConfirmManagerService=a,this.gasPriceQuery=r,this.swapSettingsQuery=c,this.swapSlippageService=d,this.isLoading=!0,this.swapSnapshot$=new $.X(null),this.estimated$=new $.X(!1),this.currentScreen="form"}get settingsDomain(){return"slippage"===this.currentScreen?"slippage":"gas-price"}ngOnInit(){const t=(0,ge.T)(this.swapSlippageService.slippageTolerance$.pipe((0,D.x)(Y.fS0),(0,fe.T)(1)),this.swapSettingsQuery.gasPrice$.pipe((0,D.x)(Y.fS0),(0,fe.T)(1))).pipe((0,y.w)(()=>this.requestSwapBuilder(this).pipe((0,E.q)(1))),(0,h.b)(i=>{this.isLoading=!1}),(0,ne.R)(this.destroy$));(0,v.O)(t,"refetch swap data")}ngOnDestroy(){this.swapConfirmManagerService.reset()}setSwapSnapshot(t){this.swapSnapshot$.next(t)}setEstimated(t){this.estimated$.next(t)}openSettings(t){this.currentScreen=t}handleClose(){this.matDialog.closeAll()}returnToConfirmFormHandler(){this.currentScreen="form",this.requestSwapBuilder(this).pipe((0,E.q)(1)).subscribe({complete:()=>this.isLoading=!1,error:t=>(0,W.eK)(t,"refetch swap data")})}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(R.a3,2),e.\u0275\u0275directiveInject(b.uw),e.\u0275\u0275directiveInject(H.GA),e.\u0275\u0275directiveInject(F.j),e.\u0275\u0275directiveInject(V.G),e.\u0275\u0275directiveInject(ue.j))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-confirm-swap-wrapper"]],viewQuery:function(t,i){if(1&t&&e.\u0275\u0275viewQuery(pn,5),2&t){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.confirmForm=a.first)}},inputs:{isLoading:"isLoading"},features:[e.\u0275\u0275ProvidersFeature([R.a3])],decls:3,vars:4,consts:[[4,"ngIf"],["class","confirm-swap-dialog",3,"ngSwitch",4,"ngIf"],[1,"confirm-swap-dialog",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["data-id","confirm-swap-box",3,"estimated","swapSnapshot","openSettings","onClose"],["confirmForm",""],[3,"settingsType","backButtonClick"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,ln,1,0,"app-prepare-transaction",0),e.\u0275\u0275template(2,un,3,2,"div",1),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275classProp("loading-wrap",i.isLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.isLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.isLoading))},styles:["[_nghost-%COMP%]{display:block;border-radius:20px;margin:auto;background:var(--1inch-bg-02);width:418px;max-width:100%;overflow:hidden}.confirm-swap-dialog[_ngcontent-%COMP%]{width:100%;max-height:85vh;overflow:auto;padding:0 16px 16px}.confirm-swap-dialog[_ngcontent-%COMP%] > swap-confirm-settings[_ngcontent-%COMP%]{margin-top:16px}.loading-wrap[_ngcontent-%COMP%]{min-height:426px;max-height:90vh!important;display:flex!important;justify-content:center}"]}),n})();var gn=o(56472),we=o(3228);let hn=(()=>{class n{constructor(t,i,a,r){this.router=t,this.tokensQuery=i,this.routerHelperService=a,this.swapStore=r}canActivate(t){var i;const{sourceToken:a,destinationToken:r}=(null===(i=t.parent)||void 0===i?void 0:i.params)||{};if(!a&&!r)return this.getDefaultFallbackUrlTree();const c=this.tokensQuery.findTokenBySymbolOrAddress(a,!1),d=this.tokensQuery.findTokenBySymbolOrAddress(r,!1);if(!c||!d)return this.getDefaultFallbackUrlTree();const{destinationTokenAmountTruncated:m}=this.swapStore.getValue();this.swapStore.update({sourceToken:d,sourceTokenAmount:m,destinationToken:c,destinationTokenAmount:"",destinationTokenAmountTruncated:""});const l=this.routerHelperService.buildSwapTokensUrl(d.symbol,c.symbol);return this.router.parseUrl(l)}getDefaultFallbackUrlTree(){const t=this.routerHelperService.buildDefaultClassicSwapUrl();return this.router.parseUrl(t)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(_.F0),e.\u0275\u0275inject(gn.d),e.\u0275\u0275inject(we.b),e.\u0275\u0275inject(ve.X))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var et=o(37683),Ce=o(54377),tt=o(16562),Se=o(13941),vn=o(95496);let fn=(()=>{class n extends tt.B{constructor(t,i,a,r,c,d){super(t,i,a,r),this.router=t,this.activeConnectionQuery=i,this.tokensSearchService=a,this.tradeNavigationStateService=r,this.routerHelperService=c,this.swapService=d,this.tradeFormKind=tt.p.SWAP,this.tradeNavigationKind=Ce.p.CLASSIC_SWAP}setNavigationState(t){this.swapService.updateValuesInStore(t)}getDefaultTradeUrl(){return this.router.createUrlTree([this.routerHelperService.buildDefaultClassicSwapUrl()])}getImportUrl(t){return this.router.createUrlTree([this.activeConnectionQuery.currentChainId,et.F,"swap",...t.url.map(i=>i.path),"import-token"])}getTradeUrlForPair(t){return this.router.createUrlTree([this.activeConnectionQuery.currentChainId,et.F,"swap",t.sourceToken,t.destinationToken])}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(_.F0),e.\u0275\u0275inject(O.r),e.\u0275\u0275inject(vn.M),e.\u0275\u0275inject(Ce.W),e.\u0275\u0275inject(we.b),e.\u0275\u0275inject(J.g))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:Se.y}),n})();var wn=o(37642),Cn=o(1596),Sn=o(2819);let xn=(()=>{class n{constructor(t,i,a,r,c,d){this.router=t,this.routerHelperService=i,this.featureToggleService=a,this.globalSettingsService=r,this.tradeNavigationStateService=c,this.activeConnectionQuery=d}canActivate(t){const{sourceToken:i,destinationToken:a}=this.tradeNavigationStateService.tradeNavigationState$.value||{};return this.globalSettingsService.updateExchangeLayoutSettings({showCharts:!this.activeConnectionQuery.isRestrainedNetwork,showRouting:!0,showTables:!0}),this.router.createUrlTree(i&&a?[this.routerHelperService.buildUnifiedSwapUrl(i.symbol,a.symbol)]:[this.routerHelperService.buildDefaultUnifiedSwapUrl()])}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(_.F0),e.\u0275\u0275inject(we.b),e.\u0275\u0275inject(Cn.BV),e.\u0275\u0275inject(Sn.o),e.\u0275\u0275inject(Ce.W),e.\u0275\u0275inject(O.r))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:Se.y}),n})();var nt=o(44803),yn=o(70167),it=o(69762),Pn=o(20807),xe=o(48640),Tn=o(77616),bn=o(98182);function _n(n,s){if(1&n&&(e.\u0275\u0275elementStart(0,"div",9)(1,"div",10),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"transloco"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",11),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()),2&n){const t=s.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,2,t.title)," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",t.value," ")}}let ot=(()=>{class n{constructor(t,i,a){this.dialogRef=t,this.settingsUpdatePopupService=i,this.router=a,this.updatedSettings$=this.settingsUpdatePopupService.updatedSettings$}ngOnInit(){this.settingsUpdatePopupService.setPopupIsShown()}close(){this.dialogRef.close()}openSettings(){this.router.navigateByUrl(`${this.router.url}/settings`),this.close()}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(b.so),e.\u0275\u0275directiveInject(ye),e.\u0275\u0275directiveInject(_.F0))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["settings-update-popup"]],decls:18,vars:15,consts:[[1,"title"],["data-id","attention-popup.close-icon",1,"blank-button","close",3,"click"],["width","24","height","24"],[0,"xlink","href","assets/images/icons/cross.svg#cross"],[1,"text"],[1,"wrapper"],["class","setting",4,"ngFor","ngForOf"],["color","blue",1,"open-settings",3,"click"],["color","light-blue",3,"click"],[1,"setting"],[1,"setting__title"],[1,"setting__value"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"h3",0),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"transloco"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",1),e.\u0275\u0275listener("click",function(){return i.close()}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(4,"svg",2),e.\u0275\u0275element(5,"use",3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(6,"p",4),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"transloco"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",5),e.\u0275\u0275template(10,_n,6,4,"div",6),e.\u0275\u0275pipe(11,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"simple-button",7),e.\u0275\u0275listener("click",function(){return i.openSettings()}),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"transloco"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"simple-button",8),e.\u0275\u0275listener("click",function(){return i.close()}),e.\u0275\u0275text(16),e.\u0275\u0275pipe(17,"transloco"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,5,"update-settings.title")),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(8,7,"update-settings.text2"),"\n"),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(11,9,i.updatedSettings$)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(14,11,"update-settings.open-settings"),"\n"),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(17,13,"update-settings.close"),"\n"))},dependencies:[u.sg,bn.q,u.Ov,C.Ot],styles:["[_nghost-%COMP%]{display:block;position:relative;max-width:420px;border-radius:24px;padding:16px;background-color:var(--1inch-bg-02)}.title[_ngcontent-%COMP%]{text-align:center;font-size:20px;line-height:23px;margin-bottom:0;padding:0 24px;margin-bottom:20px!important;text-align:center!important}@media (max-width: 520px){.title[_ngcontent-%COMP%]{font-size:18px}}.text[_ngcontent-%COMP%]{text-align:center!important;color:var(--1inch-text-14);line-height:26px}.close[_ngcontent-%COMP%]{position:absolute;width:36px;height:36px;padding:6px;border-radius:12px;color:var(--1inch__ui-01);top:10px;right:10px;top:8px}.close[_ngcontent-%COMP%]:hover{background:var(--1inch-common-btn-bg-03)}@media (max-width: 520px){.close[_ngcontent-%COMP%]{display:none}}.wrapper[_ngcontent-%COMP%]{margin-top:16px;padding:16px;background:var(--1inch-bg-03);border-radius:12px}.open-settings[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:16px}a[_ngcontent-%COMP%]{text-decoration:none}.setting[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.setting__title[_ngcontent-%COMP%]{size:13px;color:var(--1inch-text-04)}.setting__value[_ngcontent-%COMP%]{size:13px;color:var(--1inch-text-03)}.setting[_ngcontent-%COMP%] + .setting[_ngcontent-%COMP%]{margin-top:16px}"],changeDetection:0}),n})();var On=o(77664),In=o(1942);const at=["gasPrice","gasPriceAdvanced","slippageTolerance","partialFill","compatibilityMode","useLegacyTransactions"];let ye=(()=>{class n{constructor(t,i,a,r,c,d,m){this.matDialog=t,this.swapSettingsQuery=i,this.activeConnectionQuery=a,this.transolocoService=r,this.gasPriceQuery=c,this.settingsUpdatePopupQuery=d,this.settingsUpdatePopupStoreService=m,this.eip1559GasPrices$=this.gasPriceQuery.selectLoadedAdvancedGasFees().pipe((0,q.O)({baseFee:"0",low:{maxPriorityFeePerGas:"0",maxFeePerGas:"0"},high:{maxPriorityFeePerGas:"0",maxFeePerGas:"0"},instant:{maxPriorityFeePerGas:"0",maxFeePerGas:"0"}})),this.gasPriceSelectorItems$=(0,L.a)([this.gasPriceQuery.selectLoadedGasFees("standard").pipe((0,q.O)(0)),this.gasPriceQuery.selectLoadedGasFees("instant").pipe((0,q.O)(0)),this.gasPriceQuery.selectLoadedGasFees("fast").pipe((0,q.O)(0))]).pipe((0,f.U)(([l,p,g])=>(0,it.fF)({standard:l,instant:p,fast:g}))),this.presetsItems$=this.eip1559GasPrices$.pipe((0,f.U)(l=>l?{low:(0,xe.p)(l.low,l.baseFee,this.transolocoService),high:(0,xe.p)(l.high,l.baseFee,this.transolocoService),instant:(0,xe.p)(l.instant,l.baseFee,this.transolocoService)}:null)),this.updatedSettings$=(0,L.a)({prevSettings:this.swapSettingsQuery.selectPropsForCurrentChainId(at,"swap-classic-settings-consumer"),curSettings:this.swapSettingsQuery.selectPropsForCurrentChainId(at,"swap-uni-settings-consumer"),supportEIP1559:this.activeConnectionQuery.isChainSupportEIP1559$,currentChainGasUnitName:this.activeConnectionQuery.currentChainGasUnitName$,gasPriceSelectorItems:this.gasPriceSelectorItems$,presets:this.presetsItems$}).pipe((0,f.U)(l=>this.getUpdatedSettings(l)))}open(){const t=(0,L.a)([this.settingsUpdatePopupQuery.isPopupShown$,this.updatedSettings$]).pipe((0,E.q)(1),(0,h.b)(([i,a])=>{if(localStorage.getItem("IGNORE_POPUP_SHOWN_FEATURE_FLAG"))this.matDialog.open(ot);else if(!i){if(0===a.length)return void this.setPopupIsShown();this.matDialog.open(ot)}}));(0,v.O)(t,"updatedSettings$")}setPopupIsShown(){this.settingsUpdatePopupStoreService.changeIsPopupShown(!0)}getUpdatedSettings(t){const{prevSettings:i,curSettings:a,supportEIP1559:r,currentChainGasUnitName:c,gasPriceSelectorItems:d,presets:m}=t,l=this.getUpdatedStoreSettingsMap({prevSettings:i,curSettings:a,supportEIP1559:r});return Object.keys(l).map(p=>{var g;if("partialFill"===p)return{title:"advancedSettingsPanels.partial-fill",value:l[p]?"ON":"OFF"};if("compatibilityMode"===p)return{title:"advancedSettingsPanels.allow-unoswap2",value:l[p]?"ON":"OFF"};if("useLegacyTransactions"===p)return{title:"advancedSettingsPanels.use-legacy-transactions",value:l[p]?"ON":"OFF"};if("slippageTolerance"===p)return{title:"swapConfirmSettings.slippageTolerance",value:(0,Tn.$v)(l[p],0)};if(r&&!a.useLegacyTransactions&&"gasPriceAdvanced"===p){const w=l[p],P="custom"===w.type?null===(g=w.customValue)||void 0===g?void 0:g.maxFee:null==m?void 0:m[w.type.toLowerCase()];return{title:"advancedSettingsPanels.gas-price2",value:(0,Pn.pZ)(w.type,P,this.transolocoService,c,!0)}}return{title:"advancedSettingsPanels.gas-price2",value:(0,it.U8)(l[p],d,this.transolocoService,c)}})}getUpdatedStoreSettingsMap(t){const{prevSettings:i,curSettings:a,supportEIP1559:r}=t;return Object.keys(a).filter(c=>!("useLegacyTransactions"===c&&"boolean"!=typeof a[c]||(0,Y.o5F)(c,a,i)||r&&!a.useLegacyTransactions&&"gasPrice"===c||(!r||a.useLegacyTransactions)&&"gasPriceAdvanced"===c)).reduce((c,d)=>(c[d]=a[d],c),{})}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(b.uw),e.\u0275\u0275inject(V.G),e.\u0275\u0275inject(O.r),e.\u0275\u0275inject(C.Vn),e.\u0275\u0275inject(F.j),e.\u0275\u0275inject(On.s),e.\u0275\u0275inject(In.m))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();var Pe=o(80135),kn=o(52126),$n=o(36995),jn=o(92110),En=o(15927),Fn=o(14851);const An=function(){return["settings","custom-tokens","add-token"]};let Bn=(()=>{class n{constructor(t,i,a,r,c,d){this.swapSettingsQuery=t,this.swapSettingsService=i,this.classicSwapService=a,this.matDialogService=r,this.router=c,this.activatedRoute=d,this.customTokenRouterState={backTo:this.router.url}}refreshSwap(){this.classicSwapService.manualRefresh$.next()}openCustomTokenDialog(){this.router.navigate(["settings","custom-tokens","add-token"],{relativeTo:this.activatedRoute,state:{backTo:this.router.url}})}openSettings(){this.router.navigate(["settings"],{relativeTo:this.activatedRoute})}toggleAutoRefresh(){this.swapSettingsService.toggleClassicSwapAutoRefresh()}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(V.G),e.\u0275\u0275directiveInject(X._),e.\u0275\u0275directiveInject(Q),e.\u0275\u0275directiveInject(b.uw),e.\u0275\u0275directiveInject(_.F0),e.\u0275\u0275directiveInject(_.gz))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["swap-box-buttons"]],decls:9,vars:6,consts:[[1,"swap-actions"],["data-id","swap-box.refresh-button",1,"refresh-icon","blank-button",3,"click"],[3,"width","height","duration"],["data-id","custom-token-dialog",1,"settings-icon",3,"routerLink","state"],["width","24","height","24"],[0,"xlink","href","assets/images/simple/icons/plus.svg#plus"],["routerLink","settings","data-id","advanced-settings-button",1,"settings-icon"],[0,"xlink","href","assets/images/simple/icons/swap-settings.svg#swap-settings"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"button",1),e.\u0275\u0275listener("click",function(){return i.refreshSwap()}),e.\u0275\u0275element(2,"arrow-locator-loading",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"a",3),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(4,"svg",4),e.\u0275\u0275element(5,"use",5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(6,"a",6),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(7,"svg",4),e.\u0275\u0275element(8,"use",7),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("width",36)("height",36)("duration",10),e.\u0275\u0275advance(1),e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction0(5,An))("state",i.customTokenRouterState))},dependencies:[_.yS,Fn.X],styles:[".blank-button[_ngcontent-%COMP%]{outline:none;border:none;padding:0;margin:0}.blank-button-blue[_ngcontent-%COMP%]{color:var(--1inch-common-btn-bg-01)!important}.blank-button-blue[_ngcontent-%COMP%]:hover, .blank-button-blue[_ngcontent-%COMP%]:focus{color:var(--1inch-common-btn-bg-06)!important}.primary-action-button[_ngcontent-%COMP%]{display:block;width:100%;border:none;outline:0;cursor:pointer;font-size:16px;font-weight:500;color:var(--1inch-common-text-01)!important;text-align:center;text-decoration:none!important;background:var(--1inch-common-btn-gradient-bg-01);border-radius:12px;margin-top:8px}.primary-action-button[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:block;padding:16px 0}.primary-action-button[_ngcontent-%COMP%]:hover, .primary-action-button[_ngcontent-%COMP%]:focus{background:var(--1inch-common-btn-gradient-bg-03)}.primary-action-button.disabled[_ngcontent-%COMP%], .primary-action-button[disabled][_ngcontent-%COMP%]{cursor:default;background:var(--1inch-btn-bg-03);color:var(--1inch__ui-02-03)!important}.primary-action-button.alert-button[_ngcontent-%COMP%], .primary-action-button.high-slippage[_ngcontent-%COMP%]{background:var(--1inch-common-bg-04)}.primary-action-button.alert-button.disabled[_ngcontent-%COMP%], .primary-action-button.alert-button[disabled][_ngcontent-%COMP%], .primary-action-button.high-slippage.disabled[_ngcontent-%COMP%], .primary-action-button.high-slippage[disabled][_ngcontent-%COMP%]{cursor:default;background:var(--1inch-btn-bg-03);color:var(--1inch__ui-02-03)!important}.primary-action-button-blue[_ngcontent-%COMP%]{background:var(--1inch-common-btn-bg-01)!important}.primary-action-button-blue[_ngcontent-%COMP%]:hover, .primary-action-button-blue[_ngcontent-%COMP%]:focus{background:var(--1inch-common-btn-bg-06)!important}.primary-action-button-transparent-blue[_ngcontent-%COMP%]{background:rgba(47,138,245,.16)!important;color:var(--1inch-common-text-03)!important}.primary-action-button-transparent-blue[_ngcontent-%COMP%]:hover, .primary-action-button-transparent-blue[_ngcontent-%COMP%]:focus{background:rgba(47,138,245,.32)!important}@media (max-width: 418px){.primary-action-button[_ngcontent-%COMP%]{margin-top:24px}}[_nghost-%COMP%]{display:block;position:absolute;right:17px;top:8px;z-index:2}.swap-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:120px}.settings-icon[_ngcontent-%COMP%]{padding:6px}.refresh-icon[_ngcontent-%COMP%], .settings-icon[_ngcontent-%COMP%]{cursor:pointer;width:36px;height:36px;border-radius:12px;transition:background .2s}.refresh-icon[_ngcontent-%COMP%]:hover, .refresh-icon[_ngcontent-%COMP%]:focus, .settings-icon[_ngcontent-%COMP%]:hover, .settings-icon[_ngcontent-%COMP%]:focus{background:var(--1inch-common-btn-bg-03)}svg[_ngcontent-%COMP%]{color:var(--1inch-text-01)}@media (max-width: 360px){[_nghost-%COMP%]{top:12px}.swap-actions[_ngcontent-%COMP%]{width:100px}.refresh-icon[_ngcontent-%COMP%], .settings-icon[_ngcontent-%COMP%]{width:24px;height:24px}.settings-icon[_ngcontent-%COMP%]{padding:0}.refresh-icon[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;overflow:hidden}}"]}),n})();var N=o(43253),Dn=o(37867),Qn=o(90463);const Rn=[{type:N.dn.maxResult,icon:"assets/images/icons/usd.svg#usd",title:"pathfinderQuickSwitch.max-return",dataId:"pathfinder-switch.maximum-return",disabled:!1},{type:N.dn.lowerGas,icon:"assets/images/icons/fire.svg#fire",title:"pathfinderQuickSwitch.lowest-gas",dataId:"pathfinder-switch.lowest-gas",disabled:!1},{type:N.dn.OTC,icon:"assets/images/icons/otc.svg#otc",title:"pathfinderQuickSwitch.otc",dataId:"pathfinder-switch.otc",disabled:!1}];let Un=(()=>{class n{constructor(t,i,a,r,c,d){this.swapSettingsQuery=t,this.swapSettingsService=i,this.otcModeService=a,this.activeConnectionQuery=r,this.liquiditySourcesQuery=c,this.destroy$=d,this.pathFinderOption=new S.UntypedFormControl(""),this.pathFinderToggleValues$=this.liquiditySourcesQuery.isOtcModeAvailable$.pipe((0,f.U)(m=>Rn.map(l=>Object.assign(Object.assign({},l),{value:l.type,title:l.title,disabled:l.type===N.dn.OTC&&!m})))),this.subscription=new G.w0,this.persistControlToStore(),this.listenPathFinderOptionControlSync()}ngOnInit(){this.initFormControl();const t=this.activeConnectionQuery.currentChainId$.pipe((0,fe.T)(1),(0,h.b)(()=>{this.pathFinderOption.setValue(N.dn.maxResult)}),(0,ne.R)(this.destroy$));(0,v.O)(t,"resetSwapPresetOnNetworkChanges$")}ngOnDestroy(){this.subscription.unsubscribe()}persistControlToStore(){const t=this.pathFinderOption.valueChanges.pipe((0,h.b)(i=>{const a=this.swapSettingsQuery.isPathfinderPresetOTCEnabled,r=i===N.dn.OTC;this.swapSettingsService.setPartialValuesForCurrentChain({pathfinderPreset:i}),a&&this.otcModeService.onSwitchFromOTC(),r&&this.otcModeService.onSwitchToOTC()}));this.subscription.add(t.subscribe({error:i=>(0,W.eK)(i,"PathfinderQuickSwitchComponent controls")}))}initFormControl(){const{pathfinderPreset:t}=this.swapSettingsQuery.getValueForCurrentChainId();this.pathFinderOption.setValue(t)}listenPathFinderOptionControlSync(){const t=this.swapSettingsQuery.selectForCurrentChainId("pathfinderPreset").pipe((0,h.b)(i=>{i!==this.pathFinderOption.value&&this.pathFinderOption.setValue(i)}));this.subscription.add(t.subscribe({error:i=>(0,W.eK)(i,"PathfinderQuickSwitchComponent listenPathFinderOptionControlSync")}))}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(V.G),e.\u0275\u0275directiveInject(X._),e.\u0275\u0275directiveInject(Dn.N),e.\u0275\u0275directiveInject(O.r),e.\u0275\u0275directiveInject(he.F),e.\u0275\u0275directiveInject(R.a3,2))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-pathfinder-quick-switch"]],features:[e.\u0275\u0275ProvidersFeature([R.a3])],decls:3,vars:5,consts:[[1,"pathfinder-quick-switch"],[3,"formControl","values","selectedValue"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"app-advanced-settings-toggle-group",1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("formControl",i.pathFinderOption)("values",e.\u0275\u0275pipeBind1(2,3,i.pathFinderToggleValues$))("selectedValue",i.pathFinderOption.value))},dependencies:[S.NgControlStatus,S.FormControlDirective,Qn.e,u.Ov],styles:[".pathfinder-quick-switch[_ngcontent-%COMP%]{margin-top:20px}"]}),n})();var Vn=o(47384),Ln=o(33646),Gn=o(89092),Wn=o(32005),zn=o(46801),st=o(36477),rt=o(2551),Nn=o(83140);function Kn(n,s){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"token-select-input",1),e.\u0275\u0275listener("setMaxAmount",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.setMaxAmount())}),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275pipe(4,"transloco"),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=s.tuiLet,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("formControl",i.tokenAmountControl)("token",t)("tokenBalance",e.\u0275\u0275pipeBind1(2,7,i.tokenBalance$))("showLock",e.\u0275\u0275pipeBind1(3,9,i.tokenShowLock$))("customTokenLinkString",e.\u0275\u0275pipeBind1(4,11,"uni.swap.you-sell"))("isSwapForm",!0)("isSetMaxActive",e.\u0275\u0275pipeBind1(5,13,i.isSetMax$))}}let Hn=(()=>{class n{constructor(t,i,a,r,c,d){this.swapQuery=t,this.swapService=i,this.tokenBalanceQuery=a,this.gasPriceQuery=r,this.activeConnectionQuery=c,this.walletConnectionQuery=d,this.token$=this.swapQuery.sourceToken$,this.tokenAmount$=this.swapQuery.sourceTokenAmount$,this.tokenBalance$=this.walletConnectionQuery.connectedWalletAddress$.pipe((0,y.w)(p=>p?this.swapQuery.sourceTokenBalance$:(0,j.of)(null))),this.tokenAmountControl=new S.UntypedFormControl,this.tokenShowLock$=this.swapQuery.sourceTokenShowLock$,this.isSetMax$=this.swapQuery.isSetMax$,this.subscription=new G.w0;const m=(0,ge.T)(this.token$,this.tokenAmount$).pipe((0,y.w)(()=>this.tokenAmountControl.valueChanges.pipe((0,D.x)(),(0,f.U)(p=>(new zn.g).transform(p)))),(0,h.b)(p=>{this.swapService.updateSourceTokenAmount(p)}));(0,v.O)(m,"userInputPipeline$",this.subscription);const l=this.token$.pipe((0,h.b)(p=>{const g=(0,Gn.O)(this.swapQuery.sourceTokenAmount,p.decimals,"1.0-6");null!==g?this.swapService.updateSourceTokenAmount(g):Nn.error("TokenAmountInputComponent, sourceTokenUpdatesPipeline$: sourceTokenAmount is null")}));(0,v.O)(l,"sourceTokenUpdatesPipeline$",this.subscription)}ngOnInit(){this.initInputValue()}ngOnDestroy(){this.subscription.unsubscribe()}setMaxAmount(){const t=this.swapQuery.getValue().sourceToken;(0,Ln.D)({currentGasPrice:this.gasPriceQuery.currentGasPriceOnce$,balance:this.tokenBalanceQuery.getBalanceOnce$(t)}).pipe((0,h.b)(({currentGasPrice:i,balance:a})=>{const c=this.formatMaxBalance(t,a,i).mul(100).div(100),d=(0,Vn.formatUnits)(c,t.decimals);this.swapService.updateSourceTokenAmount(d,!0)})).subscribe({error:i=>(0,W.eK)(i,"lc0083")})}initInputValue(){const t=this.tokenAmount$.pipe((0,h.b)(i=>this.tokenAmountControl.setValue(+i,{emitEvent:!1})));(0,v.O)(t,"TokenAmountInputComponent: inputValue$",this.subscription)}formatMaxBalance(t,i,a){return(0,He.M)(t.address)&&i?(0,Wn.D)(i,a,this.activeConnectionQuery.currentChainId):i}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(x._),e.\u0275\u0275directiveInject(J.g),e.\u0275\u0275directiveInject(st.n4),e.\u0275\u0275directiveInject(F.j),e.\u0275\u0275directiveInject(O.r),e.\u0275\u0275directiveInject(ee.r))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["source-token-input"]],decls:2,vars:3,consts:[[4,"tuiLet"],[1,"source-token-input",3,"formControl","token","tokenBalance","showLock","customTokenLinkString","isSwapForm","isSetMaxActive","setMaxAmount"]],template:function(t,i){1&t&&(e.\u0275\u0275template(0,Kn,6,15,"ng-container",0),e.\u0275\u0275pipe(1,"async")),2&t&&e.\u0275\u0275property("tuiLet",e.\u0275\u0275pipeBind1(1,1,i.token$))},dependencies:[S.NgControlStatus,S.FormControlDirective,B.Ls,rt.Y,u.Ov,C.Ot],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),n})(),Xn=(()=>{class n{constructor(t,i){this.swapQuery=t,this.classicSwapService=i,this.token$=this.swapQuery.destinationToken$,this.tokenAmount$=this.swapQuery.destinationTokenAmount$,this.tokenBalance$=this.swapQuery.destinationTokenBalance$,this.tokenAmountControl=new S.UntypedFormControl,this.isLoadingMinor$=this.classicSwapService.isScheduledRequestInProgress$,this.isLoading$=this.classicSwapService.isForceRequestInProgress$,this.swapInfo$=this.swapQuery.swapInfo$,this.subscription=new G.w0}ngOnInit(){this.initInputValue()}ngOnDestroy(){this.subscription.unsubscribe()}initInputValue(){const t=this.swapQuery.select().pipe((0,h.b)(i=>{this.tokenAmountControl.setValue(i.destinationTokenAmountTruncated||"")}));(0,v.O)(t,"TokenAmountPreviewComponent: inputValue$",this.subscription)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(x._),e.\u0275\u0275directiveInject(Q))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["destination-token-input"]],decls:7,vars:21,consts:[["type","destination","selectTokenLink","select-destination-token","mode","view",1,"destination-token-input",3,"formControl","token","tokenBalance","customTokenLinkString","showMaxButton","transparent","swapInfo","showSwapLoader","isLoading"]],template:function(t,i){1&t&&(e.\u0275\u0275element(0,"token-select-input",0),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275pipe(3,"transloco"),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275pipe(6,"async")),2&t&&e.\u0275\u0275property("formControl",i.tokenAmountControl)("token",e.\u0275\u0275pipeBind1(1,9,i.token$))("tokenBalance",e.\u0275\u0275pipeBind1(2,11,i.tokenBalance$))("customTokenLinkString",e.\u0275\u0275pipeBind1(3,13,"uni.swap.you-buy"))("showMaxButton",!1)("transparent",!0)("swapInfo",e.\u0275\u0275pipeBind1(4,15,i.swapInfo$))("showSwapLoader",e.\u0275\u0275pipeBind1(5,17,i.isLoadingMinor$))("isLoading",e.\u0275\u0275pipeBind1(6,19,i.isLoading$))},dependencies:[S.NgControlStatus,S.FormControlDirective,rt.Y,u.Ov,C.Ot],styles:["[_nghost-%COMP%]{display:block}.destination-token-input[_ngcontent-%COMP%]     .select-source-token:hover, .destination-token-input[_ngcontent-%COMP%]     .select-source-token:focus{background:var(--1inch-bg-07)}"],changeDetection:0}),n})();var Zn=o(21491),Jn=o(78846),ct=o(85326),Yn=o(97093),Te=o(18412),qn=o(37742),ei=o(4685),ti=o(23524),ni=o(9907),ii=o(25541),pt=o(20088);function oi(n,s){if(1&n&&(e.\u0275\u0275elementStart(0,"trade-info-item"),e.\u0275\u0275element(1,"partner-fees",4),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()),2&n){const t=s.ngIf,i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("classicMode",!0)("usdFirst",!0)("partnersFees",t)("sourceToken",e.\u0275\u0275pipeBind1(2,4,i.sourceToken$))}}const ai=function(n){return{alternative:n}};function si(n,s){if(1&n&&(e.\u0275\u0275elementStart(0,"trade-info-item")(1,"span",5),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"transloco"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",6)(5,"span",7),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"formatUsd"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(8,"tooltip",8),e.\u0275\u0275pipe(9,"transloco"),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext().tuiLet;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,3,"swapBox.you-save")," "),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ~ ",e.\u0275\u0275pipeBind1(7,5,t.usdDiff)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("tooltip",e.\u0275\u0275pipeBind2(9,7,"swapBox.compared-to",e.\u0275\u0275pureFunction1(10,ai,t.name)))}}function ri(n,s){if(1&n&&(e.\u0275\u0275elementStart(0,"trade-info",1),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275elementStart(7,"trade-info-item"),e.\u0275\u0275element(8,"transaction-cost",2),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275pipe(11,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,oi,3,6,"trade-info-item",3),e.\u0275\u0275pipe(13,"async"),e.\u0275\u0275template(14,si,10,12,"trade-info-item",3),e.\u0275\u0275elementEnd()),2&n){const t=s.tuiLet,i=e.\u0275\u0275nextContext();e.\u0275\u0275property("sourceToken",e.\u0275\u0275pipeBind1(1,11,i.sourceToken$))("sourceTokenAmount",e.\u0275\u0275pipeBind1(2,13,i.sourceTokenAmount$))("destinationToken",e.\u0275\u0275pipeBind1(3,15,i.destinationToken$))("destinationTokenAmount",e.\u0275\u0275pipeBind1(4,17,i.destinationTokenAmount$))("isRateTradeInfoVisible",e.\u0275\u0275pipeBind1(5,19,i.isRateTradeInfoVisible$))("isRevertedRateTradeInfoVisible",e.\u0275\u0275pipeBind1(6,21,i.isRateTradeInfoVisible$)),e.\u0275\u0275advance(8),e.\u0275\u0275property("loading",e.\u0275\u0275pipeBind1(9,23,i.isLoading$))("txFeeAmount",e.\u0275\u0275pipeBind1(10,25,i.txFeeAmount$))("gasPreview",e.\u0275\u0275pipeBind1(11,27,i.currentGasPricePreview$)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(13,29,i.partnerFees$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t&&t.usdDiff>=.01)}}let ci=(()=>{class n{constructor(t,i,a,r,c,d){this.swapQuery=t,this.txFeeService=i,this.classicSwapManagerService=a,this.deviceDetectorService=r,this.swapFeesService=c,this.classicSwapService=d,this.sourceToken$=this.swapQuery.sourceToken$,this.destinationToken$=this.swapQuery.destinationToken$,this.sourceTokenAmount$=this.swapQuery.sourceTokenAmount$,this.destinationTokenAmount$=this.swapQuery.destinationTokenAmount$,this.gasUnitsConsumed$=this.swapQuery.select("gasUnitsConsumed"),this.txFeeAmount$=this.gasUnitsConsumed$.pipe((0,y.w)(m=>this.txFeeService.getTxFee(m||"0",this.classicSwapManagerService))),this.isRateTradeInfoVisible$=(0,L.a)([this.sourceToken$,this.destinationToken$]).pipe((0,f.U)(([m,l])=>!this.isLpToken(m)&&!this.isLpToken(l))),this.bestAlternative$=this.swapQuery.select(["oneInch","bestAlternativeToOneInch"]).pipe((0,I.h)(m=>{const{oneInch:l,bestAlternativeToOneInch:p}=m;return!!l&&!!p}),(0,f.U)(m=>{const{oneInch:l,bestAlternativeToOneInch:p}=m;if(!l||!p)return;const g=(0,Jn.l)(p.txGasEth-l.txGasEth,4);return{name:p.sourceName,gasDiff:g,usdDiff:-1*p.diffUsd,tokenDiff:-1*p.amountDiff,tokenSymbol:l.tokenSymbol}}),(0,Zn.b)(150)),this.partnerFees$=this.swapQuery.select(["sourceToken","sourceTokenAmount"]).pipe((0,f.U)(({sourceToken:m,sourceTokenAmount:l})=>this.swapFeesService.getPartnersFees(l,m))),this.isLoading$=this.classicSwapService.isForceRequestInProgress$,this.currentGasPricePreview$=this.gasUnitsConsumed$.pipe((0,y.w)(m=>this.txFeeService.getGasFeePreview(m||"0"))),this.subscription=new G.w0}get isDesktop(){return this.deviceDetectorService.isDesktop()}ngOnInit(){this.subscription.add(this.bestAlternative$.subscribe({error:t=>(0,W.eK)(t,"lc0082")}))}ngOnDestroy(){this.subscription.unsubscribe()}isLpToken(t){return(0,ct.cU)(t)||(0,ct.Wv)(t)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(x._),e.\u0275\u0275directiveInject(Yn.V),e.\u0275\u0275directiveInject(Te.i),e.\u0275\u0275directiveInject(qn.x0),e.\u0275\u0275directiveInject(Ue.$),e.\u0275\u0275directiveInject(Q))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["swap-trade-info"]],decls:2,vars:3,consts:[["tradeInfo","","class","swap-trade-info",3,"sourceToken","sourceTokenAmount","destinationToken","destinationTokenAmount","isRateTradeInfoVisible","isRevertedRateTradeInfoVisible",4,"tuiLet"],["tradeInfo","",1,"swap-trade-info",3,"sourceToken","sourceTokenAmount","destinationToken","destinationTokenAmount","isRateTradeInfoVisible","isRevertedRateTradeInfoVisible"],["tradeInfoItemTitle","","contextId","classic-swap",3,"loading","txFeeAmount","gasPreview"],[4,"ngIf"],[3,"classicMode","usdFirst","partnersFees","sourceToken"],["tradeInfoItemTitle","",1,"text-gray"],["tradeInfoItemValue","",1,"d-flex","align-items-center"],[1,"text-green","text-right"],["direction","right",1,"swap-trade-info-tooltip",3,"tooltip"]],template:function(t,i){1&t&&(e.\u0275\u0275template(0,ri,15,31,"trade-info",0),e.\u0275\u0275pipe(1,"async")),2&t&&e.\u0275\u0275property("tuiLet",e.\u0275\u0275pipeBind1(1,1,i.bestAlternative$))},dependencies:[u.O5,Pe.K,B.Ls,ei.o,ti.n,ni.j,ii.o,u.Ov,C.Ot,pt.V],styles:["[_nghost-%COMP%]{display:block}.swap-trade-info[_ngcontent-%COMP%]     .trade-item__title{color:var(--1inch__ui-02)}.swap-trade-info-tooltip[_ngcontent-%COMP%]{margin-top:-1px}.edit-gas-price[_ngcontent-%COMP%]{margin-right:8px}.trade-info-gas-refund-value[_ngcontent-%COMP%]{margin:-1px 0}"],changeDetection:0}),n})();var pi=o(67605),li=o(51415),di=o(63898),mi=o(95535),ui=o(28541);let lt=(()=>{class n extends li.n{constructor(t,i,a,r,c,d,m,l,p,g){super((0,j.of)(void 0),t.select("isSynthetix").pipe((0,f.U)(Boolean)),t.select(["sourceToken","sourceTokenAmount","destinationToken","destinationTokenAmount"]),i,a,r,c,d,m,l,p,g),this.swapQuery=t,this.activeConnectionQuery=i,this.tokenBalanceQuery=a,this.gasPriceQuery=r,this.walletConnectionQuery=c,this.tokenAllowanceQuery=d,this.permitAvailabilityService=m,this.swapSettingsService=l,this.swapPriceImpactService=p,this.limitOrderQuery=g}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(x._),e.\u0275\u0275inject(O.r),e.\u0275\u0275inject(st.n4),e.\u0275\u0275inject(F.j),e.\u0275\u0275inject(ee.r),e.\u0275\u0275inject(di.K),e.\u0275\u0275inject(mi.X),e.\u0275\u0275inject(X._),e.\u0275\u0275inject(Re.f),e.\u0275\u0275inject(ui.g))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();var gi=o(56747),hi=o(86732),vi=o(33798);let fi=(()=>{class n{constructor(t,i,a,r,c,d,m,l,p,g,w){this.swapQuery=t,this.classicSwapButtonStateService=i,this.classicSwapManagerService=a,this.classicSwapConfirmService=r,this.swapConfirmManagerService=c,this.acceptTermsService=d,this.swapService=m,this.classicSwapService=l,this.matDialogService=p,this.swapConfirmTxService=g,this.settingToggleService=w,this.swapInfo$=this.classicSwapButtonStateService.swapInfo$,this.swapButtonState$=this.classicSwapButtonStateService.swapButtonState$,this.subscription=new G.w0,this.confirmDialogClosed$=new pi.x}get confirmDialogRef$(){return this.classicSwapConfirmService.confirmDialogRef$}ngOnInit(){const t=this.confirmDialogRef$.pipe((0,Je.BX)(),(0,y.w)(i=>i.afterClosed()),(0,h.b)(()=>{this.confirmDialogRef$.next(null),this.confirmDialogClosed$.next(),this.swapConfirmTxService.confirmSwapInProgress||this.swapService.updateDestinationTokenAmount(""),this.classicSwapService.manualRefresh$.next()}));(0,v.O)(t,"confirmDialogRefCloseWatch$")}ngOnDestroy(){this.subscription.unsubscribe()}startSwapFlow(){this.swapConfirmManagerService.setContext({swapConfirmManager:this.classicSwapConfirmService,swapBuilderManager:this.classicSwapManagerService,originalDestinationAmount:this.classicSwapManagerService.getSwapData().destinationTokenAmount});const t=this.acceptTermsService.checkTermsAccepting().pipe((0,h.b)(()=>{const i=this.matDialogService.open(qe);i.componentInstance.requestSwapBuilder=this.updateRates.bind(this),this.confirmDialogRef$.next(i);const a=this.buildSwapAfterTermsAccepting();(0,v.O)(a,"swapFlow$",this.subscription)}));(0,v.O)(t,"lc0084",this.subscription)}updateGasSettings(){this.settingToggleService.changeIsWidgetOpened({isOpened:!0,contextId:"classic-swap",widgetId:"gas-price"})}buildSwapAfterTermsAccepting(){return this.confirmDialogRef$.value?this.updateRates():(0,j.of)(void 0)}updateRates(){return this.swapConfirmManagerService.updateRates({}).pipe((0,ne.R)(this.confirmDialogClosed$))}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(x._),e.\u0275\u0275directiveInject(lt),e.\u0275\u0275directiveInject(Te.i),e.\u0275\u0275directiveInject(ce),e.\u0275\u0275directiveInject(H.GA),e.\u0275\u0275directiveInject(gi.N),e.\u0275\u0275directiveInject(J.g),e.\u0275\u0275directiveInject(Q),e.\u0275\u0275directiveInject(b.uw),e.\u0275\u0275directiveInject(te.C),e.\u0275\u0275directiveInject(hi.d))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["classic-swap-button"]],decls:3,vars:7,consts:[[3,"isCustomFlowForUpdateGasSettings","swapInfo","swapButtonState","swap","updateGasSettings"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"swap-button",0),e.\u0275\u0275listener("swap",function(){return i.startSwapFlow()})("updateGasSettings",function(){return i.updateGasSettings()}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()),2&t&&e.\u0275\u0275property("isCustomFlowForUpdateGasSettings",!0)("swapInfo",e.\u0275\u0275pipeBind1(1,3,i.swapInfo$))("swapButtonState",e.\u0275\u0275pipeBind1(2,5,i.swapButtonState$))},dependencies:[vi.C,u.Ov],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),n})();function wi(n,s){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"span"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"span"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=s.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.deepLevel),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",(t.duration/1e3).toFixed(2),"s"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.destinationTokenAmountTruncated),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("$",t.gasInUsd,"")}}function Ci(n,s){if(1&n&&(e.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"div",3)(3,"span"),e.\u0275\u0275text(4,"Developer Mode: Timing"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",4)(6,"span"),e.\u0275\u0275text(7,"Deep"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"span"),e.\u0275\u0275text(9,"Time"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"span"),e.\u0275\u0275text(11,"Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"span"),e.\u0275\u0275text(13,"Gas"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,wi,9,4,"ng-container",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",6)(16,"div")(17,"span",7),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"async"),e.\u0275\u0275elementStart(20,"span"),e.\u0275\u0275text(21,"GasUnits"),e.\u0275\u0275elementEnd()()()()()()),2&n){const t=s.ngIf,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(14),e.\u0275\u0275property("ngForOf",t),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(19,2,i.gasUnitsConsumed$)," ")}}let Si=(()=>{class n{constructor(t,i){this.swapQuery=t,this.walletConnectionQuery=i,this.timing$=this.swapQuery.select("timing"),this.gasUnitsConsumed$=this.swapQuery.select("gasUnitsConsumed")}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(x._),e.\u0275\u0275directiveInject(ee.r))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["developer-timing-mode"]],decls:2,vars:3,consts:[["class","d-flex token-swap-wrap mb-3",4,"ngIf"],[1,"d-flex","token-swap-wrap","mb-3"],[1,"sub-card","token-swap-box"],[1,"token-swap-info-row"],[1,"timing-grid"],[4,"ngFor","ngForOf"],[1,"gas-fee-wrap"],[1,"text-gray"]],template:function(t,i){1&t&&(e.\u0275\u0275template(0,Ci,22,4,"div",0),e.\u0275\u0275pipe(1,"async")),2&t&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,i.timing$))},dependencies:[u.sg,u.O5,u.Ov],styles:["[_nghost-%COMP%]{display:block}.gas-fee-wrap[_ngcontent-%COMP%]{margin-top:16px;display:flex;align-items:center;flex-direction:column;width:100%;text-align:center}.timing-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;grid-gap:8px 16px}"],changeDetection:0}),n})();function xi(n,s){1&n&&e.\u0275\u0275element(0,"gas-price-widget",11)}function yi(n,s){1&n&&e.\u0275\u0275element(0,"swap-settings",12),2&n&&e.\u0275\u0275property("compactMode",!0)}function Pi(n,s){1&n&&e.\u0275\u0275element(0,"developer-timing-mode",13)}function Ti(n,s){if(1&n&&(e.\u0275\u0275element(0,"tooltip",17),e.\u0275\u0275pipe(1,"transloco")),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(3);e.\u0275\u0275property("tooltip",e.\u0275\u0275pipeBind1(1,2,"swapBox.block-number"))("customElement",t)}}function bi(n,s){if(1&n&&(e.\u0275\u0275text(0),e.\u0275\u0275pipe(1,"async")),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(1,1,t.latestBlockNumber$)," ")}}function _i(n,s){if(1&n&&(e.\u0275\u0275elementStart(0,"div",14),e.\u0275\u0275template(1,Ti,2,4,"tooltip",15),e.\u0275\u0275template(2,bi,2,3,"ng-template",null,16,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&n){const t=s.tuiLet;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t>0)}}const Oi=function(){return{contextId:"classic-swap",widgetId:"gas-price"}};let Ii=(()=>{class n{constructor(t,i,a,r,c,d,m,l,p,g){this.uiStore=t,this.webAnalyticsService=i,this.web3ProvidersService=a,this.walletConnectionQuery=r,this.classicSwapConfirmService=c,this.classicSwapService=d,this.swapQuery=m,this.settingsUpdatePopupService=l,this.activeConnectionQuery=p,this.onDestroy$=g,this.latestBlockNumber$=this.web3ProvidersService.latestBlockNumber$,this.isDevMode$=this.walletConnectionQuery.isDevMode$,this.showEmbedSettings$=this.confirmDialogRef$.pipe((0,D.x)(),(0,f.U)(w=>!w)),this.subscription=new G.w0}get confirmDialogRef$(){return this.classicSwapConfirmService.confirmDialogRef$}ngOnInit(){this.uiStore.update({swapLayout:"classic"}),this.webAnalyticsService.pageView("/classic/swap","Exchange / Market"),this.classicSwapService.manualRefresh$.next();const t=this.activeConnectionQuery.currentChainId$.pipe((0,I.h)(i=>!!i),(0,h.b)(()=>{this.settingsUpdatePopupService.open()}),(0,ne.R)(this.onDestroy$));(0,v.O)(t,"settingsUpdatePopupOpen$")}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(nt.y),e.\u0275\u0275directiveInject(yn.y),e.\u0275\u0275directiveInject(We.v),e.\u0275\u0275directiveInject(ee.r),e.\u0275\u0275directiveInject(ce),e.\u0275\u0275directiveInject(Q),e.\u0275\u0275directiveInject(x._),e.\u0275\u0275directiveInject(ye),e.\u0275\u0275directiveInject(O.r),e.\u0275\u0275directiveInject(R.a3,2))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-swap-box"]],features:[e.\u0275\u0275ProvidersFeature([R.a3])],decls:15,vars:12,consts:[[1,"swap-box-wrap"],[1,"swap-box__source-token-input"],["reverseTokensLink","reverse",3,"rotatable"],[1,"swap-box__destination-token-input"],[1,"swap-box__swap-trade-info"],["class","gas-price-widget",4,"isSettingWidgetVisible"],["domain","classic-swap-embed","class","pinned-settings",3,"compactMode",4,"ngIf"],[1,"swap-box__app-pathfinder-quick-switch"],[1,"swap-box__classic-swap-button"],["class","swap-box__developer-timing-mode",4,"ngIf"],["class","latest-block-number",4,"tuiLet"],[1,"gas-price-widget"],["domain","classic-swap-embed",1,"pinned-settings",3,"compactMode"],[1,"swap-box__developer-timing-mode"],[1,"latest-block-number"],["contentType","custom",3,"tooltip","customElement",4,"ngIf"],["tooltipElement",""],["contentType","custom",3,"tooltip","customElement"]],template:function(t,i){1&t&&(e.\u0275\u0275element(0,"swap-box-buttons"),e.\u0275\u0275elementStart(1,"div",0),e.\u0275\u0275element(2,"source-token-input",1)(3,"swap-separator",2)(4,"destination-token-input",3)(5,"swap-trade-info",4),e.\u0275\u0275template(6,xi,1,0,"gas-price-widget",5),e.\u0275\u0275template(7,yi,1,1,"swap-settings",6),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275element(9,"app-pathfinder-quick-switch",7)(10,"classic-swap-button",8),e.\u0275\u0275template(11,Pi,1,0,"developer-timing-mode",9),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275template(13,_i,4,1,"div",10),e.\u0275\u0275pipe(14,"async"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(3),e.\u0275\u0275property("rotatable",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("isSettingWidgetVisible",e.\u0275\u0275pureFunction0(11,Oi)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(8,5,i.showEmbedSettings$)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(12,7,i.isDevMode$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("tuiLet",e.\u0275\u0275pipeBind1(14,9,i.latestBlockNumber$)))},dependencies:[u.O5,Pe.K,B.Ls,kn.W,$n.g,jn.z,En.$,Bn,Un,Hn,Xn,ci,fi,Si,u.Ov,C.Ot],styles:[".swap-box-wrap[_ngcontent-%COMP%]{overflow:hidden;height:100%}.token-swap-settings[_ngcontent-%COMP%]{margin-top:32px}.token-swap-input-field-and-title[_ngcontent-%COMP%]{width:100%;margin-top:20px}.token-swap-input[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-direction:column;margin:20px 0}.token-swap-wrap[_ngcontent-%COMP%]{justify-content:center;margin-top:20px}.token-swap-input-button[_ngcontent-%COMP%]{margin:9px 0 -29px}.flame-progress[_ngcontent-%COMP%]{width:40px;height:40px}.token-swap-input-title[_ngcontent-%COMP%]{font-size:13px}.token-swap-input-title[_ngcontent-%COMP%]:first-child{display:inline-block}.token-swap-first-field[_ngcontent-%COMP%]{z-index:30}.field-interest[_ngcontent-%COMP%]{display:flex;align-items:center}.field-interest[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{cursor:pointer;color:var(--1inch-common-btn-bg-01)}.field-interest[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{margin-right:0}.temp-class-to-remove-later[_ngcontent-%COMP%]{display:grid;row-gap:10px;column-gap:16px;grid-template-columns:125px 1fr;grid-template-rows:1fr 1fr 1fr 1fr}.gas-fee-wrap[_ngcontent-%COMP%]{margin-top:16px;display:flex;align-items:center;flex-direction:column;width:100%;text-align:center}.token-swap-button[_ngcontent-%COMP%]{width:100%;justify-content:center;display:flex}.token-swap-box[_ngcontent-%COMP%]{width:100%;max-width:420px}@media (max-width: 376px){.token-swap-box[_ngcontent-%COMP%]{font-size:14px}}.token-swap-info-row[_ngcontent-%COMP%]{width:100%;margin-bottom:8px;font-size:13px}.token-swap-info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.token-swap-info-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.token-swap-info-title[_ngcontent-%COMP%]{white-space:nowrap;display:block;margin-right:16px}.token-swap-info-value[_ngcontent-%COMP%]{white-space:nowrap;display:flex;overflow:hidden}.token-swap-info-price[_ngcontent-%COMP%]{margin-right:8px}.token-swap-info-icon[_ngcontent-%COMP%]{margin-left:8px}.token-swap-info-symbol[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:inline-block;min-width:16px}.rate-value[_ngcontent-%COMP%]{display:grid;grid-template-columns:7fr 10px 10fr}.token-swap-info-cursor[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.token-swap-info-cursor[_ngcontent-%COMP%]:hover{cursor:pointer}.rate-block[_ngcontent-%COMP%]{white-space:nowrap}.timing-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;grid-gap:8px 16px}.rate-info[_ngcontent-%COMP%]{margin-left:4px;margin-top:-2px}.rate-info[_ngcontent-%COMP%]:hover{transition:.2s;color:var(--1inch-common-btn-bg-01)}@media (min-width: 720px){.token-swap-settings[_ngcontent-%COMP%]{margin-top:40px}.token-swap-info[_ngcontent-%COMP%]{min-width:350px}.full-page-content[_ngcontent-%COMP%]   .token-swap-input[_ngcontent-%COMP%]{flex-direction:column!important}.token-swap-input-field-and-title[_ngcontent-%COMP%]{margin-top:0}.token-swap-input-button[_ngcontent-%COMP%]{margin:10px 0 -12px}}.textClass[_ngcontent-%COMP%]{border-top:1px solid}.approving-img[_ngcontent-%COMP%]{width:16px;height:16px;margin-left:4px}.allow-button-text[_ngcontent-%COMP%]{white-space:break-spaces;line-height:22px}.favorite-settings[_ngcontent-%COMP%]{margin-top:24px}.latest-block-number[_ngcontent-%COMP%]{display:flex;justify-content:center;font-size:12px;margin-top:16px;cursor:default;color:var(--1inch__ui-03);opacity:.55}.alert-button[_ngcontent-%COMP%]{background:var(--1inch-common-bg-04);cursor:pointer}.swap-box__classic-swap-button[_ngcontent-%COMP%], .swap-box__swap-trade-info[_ngcontent-%COMP%], .swap-box__app-pathfinder-quick-switch[_ngcontent-%COMP%]{margin-top:24px}.swap-box__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.swap-box__developer-timing-mode[_ngcontent-%COMP%]{margin-top:10px}.swap-box__source-token-input[_ngcontent-%COMP%]{margin-top:15px}.pinned-settings[_ngcontent-%COMP%]{margin-top:24px}.pinned-settings[_ngcontent-%COMP%]     .advanced-setting{margin-bottom:24px}","@media (min-width: 720px){.main-layout[_ngcontent-%COMP%]   .token-swap-input[_ngcontent-%COMP%]{flex-direction:row;margin:40px 0}.main-layout[_ngcontent-%COMP%]   .token-swap-input-field-and-title[_ngcontent-%COMP%]{width:45%}}"]}),n})();var Mi=o(16944),ki=o(96791),$i=o(4461),ji=o(62901),Ei=o(26341),Fi=o(35950),Ai=o(4987),Bi=o(28367),Di=o(36037),dt=o(63223);let Qi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({providers:[ye],imports:[b.Is,de.m,C.y4,dt._,_.Bz]}),n})();var Ri=o(3697),Ui=o(74004),Vi=o(78090),Li=o(86046),Gi=o(40934),Wi=o(76044),zi=o(60303),Ni=o(75604),Ki=o(77160),Hi=o(8124),Xi=o(58836),Zi=o(9032),Ji=o(92157),Yi=o(69194),qi=o(41140),eo=o(32770),to=o(33760);let no=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({providers:[qi.v,ce,Te.i,Ve,lt],imports:[u.ez,C.y4,Ei.Q,ae.z,de.m,B.WD,Ri.N,_e.V,$e.y,Bi.E,Li.q,ke.f,to._,Ee.E,eo.Z,_.Bz,Fi.S,Yi.j,Oe.y,Xi.X,Ui.l,Me.M,zi.j,Ji.U,Vi.r,Ni.l,Ki.D,Gi.f,dt._,Hi.s,Zi.j,ji.w,Mi.z,Wi.h,$i.M,Ai.M,Qi,Di.n,ki.Z,je.l]}),n})();var mt=o(39700),io=o(64324),oo=o(4671),ao=o(98586),ut=o(65083),gt=o(74941),so=o(93094),ro=o(59395),co=o(91664),po=o(43180),lo=o(73021),mo=o(40548),pe=o(96479),uo=o(29889),go=o(70859),ho=o(16350),vo=o(94226),fo=o(58877),wo=o(86345),Co=o(83140);const So=["secondColumnDropDown"];function xo(n,s){if(1&n&&(e.\u0275\u0275elementStart(0,"p",21),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.comment," ")}}function yo(n,s){if(1&n&&e.\u0275\u0275text(0),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275textInterpolate1(" -",t.txGasEth," ")}}function Po(n,s){if(1&n&&(e.\u0275\u0275text(0),e.\u0275\u0275pipe(1,"currentNetworkToken"),e.\u0275\u0275pipe(2,"async")),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(1,1,e.\u0275\u0275pipeBind1(2,3,t.networkType$))," ")}}const To=function(n,s){return{txGasUsd:n,network:s}};function bo(n,s){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"span",22),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"tooltip",23),e.\u0275\u0275pipe(4,"transloco"),e.\u0275\u0275pipe(5,"networkName"),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275element(7,"tooltip",23),e.\u0275\u0275pipe(8,"symbolName"),e.\u0275\u0275pipe(9,"currentNetworkToken"),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275template(11,yo,1,1,"ng-template",null,24,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(13,Po,3,5,"ng-template",null,25,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275reference(12),i=e.\u0275\u0275reference(14),a=e.\u0275\u0275nextContext().$implicit,r=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",a.amount," ",a.tokenSymbol,""),e.\u0275\u0275advance(1),e.\u0275\u0275property("tooltip",e.\u0275\u0275pipeBind2(4,6,"alternativesPreview.network-gas-fees",e.\u0275\u0275pureFunction2(19,To,a.txGasUsd,e.\u0275\u0275pipeBind1(5,9,e.\u0275\u0275pipeBind1(6,11,r.networkType$)))))("customElement",t),e.\u0275\u0275advance(4),e.\u0275\u0275property("tooltip",e.\u0275\u0275pipeBind1(8,13,e.\u0275\u0275pipeBind1(9,15,e.\u0275\u0275pipeBind1(10,17,r.networkType$))))("customElement",i)}}function _o(n,s){if(1&n&&(e.\u0275\u0275element(0,"tooltip",28),e.\u0275\u0275pipe(1,"transloco")),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(7);e.\u0275\u0275property("tooltip",e.\u0275\u0275pipeBind1(1,2,"alternativesPreview.compared-to-1inch"))("customElement",t)}}function Oo(n,s){if(1&n&&(e.\u0275\u0275text(0),e.\u0275\u0275pipe(1,"formatUsd")),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275textInterpolate1(" (",e.\u0275\u0275pipeBind1(1,1,t.diffUsd),") ")}}function Io(n,s){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div")(2,"span",22),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"formatUsd"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,_o,2,4,"tooltip",26),e.\u0275\u0275template(6,Oo,2,3,"ng-template",null,27,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,2,t.fiatEstimation)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.diffUsd<=-.01)}}function Mo(n,s){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div"),e.\u0275\u0275element(2,"token-amount",29),e.\u0275\u0275pipe(3,"toBigInt"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("value",e.\u0275\u0275pipeBind2(3,2,t.inverseRate,i.rateDecimals))("decimals",i.rateDecimals)}}function ko(n,s){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div"),e.\u0275\u0275element(2,"token-amount",29),e.\u0275\u0275pipe(3,"toBigInt"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("value",e.\u0275\u0275pipeBind2(3,2,t.rate,i.rateDecimals))("decimals",i.rateDecimals)}}const $o=function(n,s){return{green:n,red:s}};function jo(n,s){if(1&n&&(e.\u0275\u0275elementStart(0,"div",33),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"transloco"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(4,$o,0===t.diffPercent,t.diffPercent<0)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.diffPercent?t.diffPercent>0?"+"+t.diffPercent+" %":t.diffPercent+" %":e.\u0275\u0275pipeBind1(2,2,"alternativesPreview.match")," ")}}function Eo(n,s){1&n&&(e.\u0275\u0275elementStart(0,"div",34),e.\u0275\u0275text(1,"BEST"),e.\u0275\u0275elementEnd())}function Fo(n,s){if(1&n&&(e.\u0275\u0275elementStart(0,"div",30),e.\u0275\u0275template(1,jo,3,7,"div",31),e.\u0275\u0275template(2,Eo,2,0,"div",32),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.isOneInch&&t.hasLiquidity),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isOneInch)}}function Ao(n,s){if(1&n&&(e.\u0275\u0275elementStart(0,"div",12),e.\u0275\u0275element(1,"img",13),e.\u0275\u0275elementStart(2,"div",14)(3,"div",15)(4,"p",16),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"liquiditySourceName"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,xo,2,1,"p",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",18),e.\u0275\u0275template(9,bo,15,22,"ng-container",19),e.\u0275\u0275template(10,Io,8,4,"ng-container",19),e.\u0275\u0275template(11,Mo,4,5,"ng-container",19),e.\u0275\u0275template(12,ko,4,5,"ng-container",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(13,Fo,3,2,"div",20),e.\u0275\u0275elementEnd()),2&n){const t=s.$implicit,i=e.\u0275\u0275nextContext();e.\u0275\u0275attribute("data-id",t.pathFinderId?"alternative"+t.pathFinderId:"alternative-1inch"),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("src",t.iconPath,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(6,10,t.sourceName)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.comment),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",!t.amount&&"text-red"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","tokenAmount"===i.secondColumn),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","usd"===i.secondColumn),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","rate"===i.secondColumn),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","invertRate"===i.secondColumn),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.amount)}}const Bo=function(){return[5,10,25,100]};function Do(n,s){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-paginator",35),e.\u0275\u0275listener("page",function(a){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onPageSelect(a))}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("length",t.allAlternatives.length)("pageIndex",t.pageIndex)("pageSize",t.pageSize)("pageSizeOptions",e.\u0275\u0275pureFunction0(4,Bo))}}const Qo={usd:"USD value",tokenAmount:"Amount",rate:"Rate",invertRate:"Invert Rate"};let Ro=(()=>{class n{constructor(t,i,a,r,c,d){var m;this.swapQuery=t,this.liquiditySourceQuery=i,this.uiQuery=a,this.uiStore=r,this.uiService=c,this.activeConnectionQuery=d,this.pageSize=10,this.pageIndex=0,this.allAlternatives=[],this.rateDecimals=mo.q,this.pairRateTitle$=this.swapQuery.select(["sourceToken","destinationToken"]).pipe((0,f.U)(p=>`${(0,pe.O)(p.sourceToken)} / ${(0,pe.O)(p.destinationToken)}`)),this.inversePairRateTitle$=this.swapQuery.select(["sourceToken","destinationToken"]).pipe((0,f.U)(p=>`${(0,pe.O)(p.destinationToken)} / ${(0,pe.O)(p.sourceToken)}`)),this.networkType$=this.activeConnectionQuery.currentUiChain$.pipe((0,f.U)(p=>p.type)),this.secondColumn=null===(m=this.uiQuery.getValue())||void 0===m?void 0:m.alternativeSwapsEvaluationDisplayMode,this.subscription=a.select("alternativeSwapsEvaluationDisplayMode").pipe((0,h.b)(p=>{this.secondColumn=p}),(0,y.w)(p=>"rate"===p?this.pairRateTitle$:"invertRate"===p?this.inversePairRateTitle$:(0,j.of)(Qo[p])),(0,h.b)(p=>{this.secondColumnTitle=p})).subscribe({error:p=>(0,W.eK)(p,"av0021")});const l=this.swapQuery.select("alternatives").pipe((0,f.U)(p=>{this.allAlternatives=p||[],this.showPage(this.pageIndex,this.pageSize)}));this.subscription.add(l.subscribe({error:p=>(0,W.eK)(p,"av0022")}))}trackByPathFinderId(t,i){return i.pathFinderId}ngOnDestroy(){this.subscription.unsubscribe()}setSecondColumnValue(t){this.secondColumn=t,this.uiService.switchAlternativesComparisonBy(t),this.secondColumnDropDown.close()}showPage(t,i){const a=t*i;this.pageSize=i,this.page=this.allAlternatives.slice(a,a+i)}onPageSelect(t){const{pageIndex:i,pageSize:a}=t;void 0!==i&&void 0!==a?(this.pageIndex=i,this.showPage(i,a)):Co.error("AlternativesPreviewComponent.onPageSelect() pageIndex or pageSize is undefined",t)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(x._),e.\u0275\u0275directiveInject(he.F),e.\u0275\u0275directiveInject(ut.s),e.\u0275\u0275directiveInject(nt.y),e.\u0275\u0275directiveInject(gt.F),e.\u0275\u0275directiveInject(O.r))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-alternatives-preview"]],viewQuery:function(t,i){if(1&t&&e.\u0275\u0275viewQuery(So,5),2&t){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.secondColumnDropDown=a.first)}},decls:22,vars:14,consts:[["data-id","exchanges-table",1,"alternatives-table"],["transloco","alternativesPreview.name",1,"text-gray","table-header-token"],["ngbDropdown","","placement","bottom-left",1,"table-header-dropdown-toggle"],["secondColumnDropDown","ngbDropdown"],["ngbDropdownToggle","",1,"dropdownToggle"],["ngbDropdownMenu","",1,"dropdown-triangle","option-dropdown","alternatives-dropdown-menu",2,"z-index","1001"],["transloco","value.usd2",1,"alternatives-table__column-title",3,"ngClass","click"],["transloco","field.amount",1,"alternatives-table__column-title",3,"ngClass","click"],[1,"alternatives-table__column-title",3,"ngClass","click"],["transloco","alternativesPreview.diff",1,"text-gray","table-header-title","text-center"],["class","table-token-row",4,"ngFor","ngForOf","ngForTrackBy"],["class","alternatives-table-paginator",3,"length","pageIndex","pageSize","pageSizeOptions","page",4,"ngIf"],[1,"table-token-row"],["loading","lazy",1,"table-token-logo",3,"src"],[1,"table-token-info"],[1,"table-token-name","mb-4"],[1,"table_token_name","option_selected"],["class","table-token table-token-name-text text-gray",4,"ngIf"],[1,"table-amount","table-amount-number","option_selected",3,"ngClass"],[4,"ngIf"],["class","text-right",4,"ngIf"],[1,"table-token","table-token-name-text","text-gray"],[1,"text-current","amount-text"],["direction","top","contentType","custom",1,"text-red",3,"tooltip","customElement"],["tooltipElement1",""],["tooltipElement2",""],["class","text-red","contentType","custom",3,"tooltip","customElement",4,"ngIf"],["tooltipElement3",""],["contentType","custom",1,"text-red",3,"tooltip","customElement"],[1,"text-current","amount-text",3,"value","decimals"],[1,"text-right"],["class","table-diff table-diff-field text-center",3,"ngClass",4,"ngIf"],["class","table-diff-field blue","transloco","alternativesPreview.best",4,"ngIf"],[1,"table-diff","table-diff-field","text-center",3,"ngClass"],["transloco","alternativesPreview.best",1,"table-diff-field","blue"],[1,"alternatives-table-paginator",3,"length","pageIndex","pageSize","pageSizeOptions","page"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"h4",1),e.\u0275\u0275text(2,"Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",2,3)(5,"span",4),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",5)(8,"span",6),e.\u0275\u0275listener("click",function(){return i.setSecondColumnValue("usd")}),e.\u0275\u0275text(9,"USD value"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"span",7),e.\u0275\u0275listener("click",function(){return i.setSecondColumnValue("tokenAmount")}),e.\u0275\u0275text(11,"Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"span",8),e.\u0275\u0275listener("click",function(){return i.setSecondColumnValue("rate")}),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"span",8),e.\u0275\u0275listener("click",function(){return i.setSecondColumnValue("invertRate")}),e.\u0275\u0275text(16),e.\u0275\u0275pipe(17,"async"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"h4",9),e.\u0275\u0275text(19,"Diff"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(20,Ao,14,12,"div",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,Do,1,5,"mat-paginator",11)),2&t&&(e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",i.secondColumnTitle," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass","usd"===i.secondColumn&&"option_selected"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass","tokenAmount"===i.secondColumn&&"option_selected"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass","rate"===i.secondColumn&&"option_selected"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(14,10,i.pairRateTitle$)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass","invertRate"===i.secondColumn&&"option_selected"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(17,12,i.inversePairRateTitle$)," "),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",i.page)("ngForTrackBy",i.trackByPathFinderId),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.allAlternatives.length))},dependencies:[u.mk,u.sg,u.O5,C.KI,Pe.K,z.jt,z.iD,z.Vi,oe.NW,uo.O,u.Ov,C.Ot,go._,ho.j,vo.M,fo.u,wo.M,pt.V],styles:["[_nghost-%COMP%]{min-height:220px;display:block}.alternatives-table[_ngcontent-%COMP%]{display:grid;grid-template-columns:38px 1fr 90px;align-items:center;padding:8px 0;grid-gap:28px 8px}.pretty-underline[_ngcontent-%COMP%]{border-bottom:1px solid;padding-left:2px;padding-right:2px}.amount-text[_ngcontent-%COMP%]{color:var(--1inch__ui-02);overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.table-header-dropdown-toggle[_ngcontent-%COMP%]{grid-column:1/span 2}.table-header-token[_ngcontent-%COMP%]{display:none}.network-gas-fees[_ngcontent-%COMP%]{margin-left:4px}.dropdownToggle[_ngcontent-%COMP%]{display:flex;align-items:center}.dropdownToggle[_ngcontent-%COMP%]:hover{cursor:pointer}@media (min-width: 480px){.alternatives-table[_ngcontent-%COMP%]{display:grid;grid-template-columns:38px 1fr 1fr 90px}.table-header-token[_ngcontent-%COMP%]{display:block;grid-column:1/span 2}.table-header-dropdown-toggle[_ngcontent-%COMP%]{grid-column:3/span 1}.table-token-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-column-gap:8px;grid-column:2/span 2}.amount-text[_ngcontent-%COMP%]{color:currentColor}}.alternatives-table-paginator[_ngcontent-%COMP%]{margin-top:16px}.alternatives-table-paginator[_ngcontent-%COMP%]     .mat-paginator-container{font-size:14px;justify-content:space-between;padding:0}.alternatives-table-paginator[_ngcontent-%COMP%]     .mat-paginator-page-size{align-items:center}.alternatives-table-paginator[_ngcontent-%COMP%]     .mat-paginator-page-size-select{margin:1px 0 0 12px;width:48px}.alternatives-table-paginator[_ngcontent-%COMP%]     .mat-select-trigger{font-size:14px}.alternatives-table-paginator[_ngcontent-%COMP%]     .mat-paginator-range-label{margin:2px 20px 0 0}.alternatives-table-paginator[_ngcontent-%COMP%]     .mat-icon-button{color:var(--1inch__ui-02)}.alternatives-table-paginator[_ngcontent-%COMP%]     .mat-paginator-page-size-label{margin-left:0}@media (max-width: 520px){.alternatives-table-paginator[_ngcontent-%COMP%]     .mat-paginator-container{padding:0}.alternatives-table-paginator[_ngcontent-%COMP%]     .mat-paginator-range-label{margin-right:8px}}@media (max-width: 418px){.alternatives-table-paginator[_ngcontent-%COMP%]     .mat-paginator-range-actions button{width:25px}.alternatives-table-paginator[_ngcontent-%COMP%]     .mat-paginator-container, .alternatives-table-paginator[_ngcontent-%COMP%]     .mat-select-trigger{font-size:12px}.alternatives-table-paginator[_ngcontent-%COMP%]     .mat-paginator-page-size-select{margin:2px 0 0 4px;width:40px}}.alternatives-dropdown-menu[_ngcontent-%COMP%]{background:var(--1inch-bg-02);box-shadow:var(--1inch-shadow-01)}.alternatives-dropdown-menu[_ngcontent-%COMP%]:before{border-color:transparent transparent var(--1inch-bg-02) transparent}",".table-token-row[_ngcontent-%COMP%]{display:contents}.table-token-logo[_ngcontent-%COMP%]{height:38px}.table_token_name[_ngcontent-%COMP%]{font-size:16px;word-break:break-word}.table-token-name-text[_ngcontent-%COMP%]{margin-top:4px}.table-token[_ngcontent-%COMP%]{font-size:16px}.table-token-name[_ngcontent-%COMP%]{line-height:18px}.table-amount-number[_ngcontent-%COMP%]{font-size:16px}.table-txgas-field[_ngcontent-%COMP%]{border-radius:16px;padding:8px;width:90px;text-align:center;display:inline-block}.table-txgas-number[_ngcontent-%COMP%]{font-size:16px}.table-diff-field[_ngcontent-%COMP%]{border-radius:16px;padding:8px;width:90px;text-align:center;display:inline-block;text-transform:uppercase}.amount-text[_ngcontent-%COMP%]{grid-column:3/5;text-align:right}.red[_ngcontent-%COMP%]{color:var(--1inch-common-bg-04);background:rgba(193,61,84,.05)}.yellow[_ngcontent-%COMP%]{color:var(--1inch__text-and-icons__warning);background:rgba(255,156,8,.05)}.green[_ngcontent-%COMP%]{color:#23c68b;background:rgba(35,198,139,.05)}.blue[_ngcontent-%COMP%]{color:var(--1inch-common-btn-bg-01);background:rgba(47,138,245,.05)}.cursor-pointer[_ngcontent-%COMP%]:hover{cursor:pointer}.alternatives-table__column-title[_ngcontent-%COMP%]{color:var(--1inch__ui-02)}.alternatives-table__column-title[_ngcontent-%COMP%]:hover{background:var(--1inch-bg-03)}.alternatives-table__column-title.option_selected[_ngcontent-%COMP%]{color:var(--1inch-text-01)}@media (min-width: 720px){.table-line[_ngcontent-%COMP%]{grid-template-columns:38px 1fr 2fr 120px 120px}}"]}),n})();var Uo=o(95475);function Vo(n,s){if(1&n&&(e.\u0275\u0275elementStart(0,"div",7),e.\u0275\u0275element(1,"trade-charts-widget",8),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("tokensPair",e.\u0275\u0275pipeBind1(2,1,t.tokensPair$))}}function Lo(n,s){if(1&n&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"pathfinder-routing",15),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275elementContainerEnd()),2&n){const t=s.ngIf,i=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("sourceToken",t.sourceToken)("destinationToken",t.destinationToken)("isLoading",e.\u0275\u0275pipeBind1(2,4,i.isForceRequestInProgress$))("routes",e.\u0275\u0275pipeBind1(3,6,i.routes$))}}function Go(n,s){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",9)(1,"div",10)(2,"h2",11),e.\u0275\u0275text(3,"Routing"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",12),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.showFullscreenRouting())}),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(5,"svg",13),e.\u0275\u0275element(6,"use",14),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(7,Lo,4,8,"ng-container",6),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(8,1,t.swapPair$))}}function Wo(n,s){1&n&&(e.\u0275\u0275elementStart(0,"span",19),e.\u0275\u0275text(1,"Exchanges"),e.\u0275\u0275elementEnd())}function zo(n,s){1&n&&e.\u0275\u0275element(0,"app-alternatives-preview")}function No(n,s){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"span",20)(2,"span",21),e.\u0275\u0275text(3,"Swap history"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"\xa0"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"span"),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"displaySymbol"),e.\u0275\u0275pipe(9,"displaySymbol"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=s.ngIf;e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate2("(",e.\u0275\u0275pipeBind1(8,2,t.sourceToken),"/",e.\u0275\u0275pipeBind1(9,4,t.destinationToken),")")}}function Ko(n,s){if(1&n&&(e.\u0275\u0275template(0,No,10,6,"ng-container",6),e.\u0275\u0275pipe(1,"async")),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,t.swapPair$))}}function Ho(n,s){if(1&n&&(e.\u0275\u0275element(0,"app-transaction-history",22),e.\u0275\u0275pipe(1,"async")),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("tokensPair",e.\u0275\u0275pipeBind1(1,1,t.swapPair$))}}function Xo(n,s){1&n&&(e.\u0275\u0275elementStart(0,"mat-tab"),e.\u0275\u0275template(1,Ko,2,3,"ng-template",17),e.\u0275\u0275template(2,Ho,2,3,"ng-template",18),e.\u0275\u0275elementEnd())}function Zo(n,s){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"mat-tab-group",16),e.\u0275\u0275listener("selectedTabChange",function(a){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.setSelectedTableTab(a))}),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementStart(3,"mat-tab"),e.\u0275\u0275template(4,Wo,2,0,"ng-template",17),e.\u0275\u0275template(5,zo,1,0,"ng-template",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,Xo,3,0,"mat-tab",6),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("selectedIndex",t.getSelectedSwapViewTabIndex(e.\u0275\u0275pipeBind1(2,2,t.selectedTableTab$))),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(7,4,t.isHistoryDisabled$))}}function Jo(n,s){if(1&n&&(e.\u0275\u0275elementStart(0,"div",3),e.\u0275\u0275template(1,Vo,3,3,"div",4),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,Go,9,3,"div",5),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275template(5,Zo,8,6,"div",6),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,3,t.isShowGraphics$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(4,5,t.isShowRouting$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(6,7,t.isShowSwapTables$))}}let Yo=(()=>{class n{constructor(t,i,a,r,c,d,m,l,p,g,w){this.globalSettingsQuery=t,this.matDialogService=i,this.swapQuery=a,this.uiQuery=r,this.uiService=c,this.activeConnectionQuery=d,this.destroy$=m,this.classicSwapService=l,this.currentSpenderService=p,this.injector=g,this.tuiDialogService=w,this.isShowRouting$=this.globalSettingsQuery.showRouting$,this.isShowSwapTables$=this.globalSettingsQuery.showTables$,this.isShowGraphics$=this.globalSettingsQuery.showCharts$,this.swapPair$=this.swapQuery.select(["sourceToken","destinationToken"]),this.isForceRequestInProgress$=this.classicSwapService.isForceRequestInProgress$,this.routes$=this.swapQuery.select("routes"),this.selectedTableTab$=this.uiQuery.select("selectedTableTab"),this.isGridView$=(0,L.a)([this.isShowSwapTables$,this.isShowRouting$,this.isShowGraphics$]).pipe((0,f.U)(([P,M,A])=>P||M||A)),this.tokensPair$=this.swapQuery.select(["sourceToken","destinationToken"]),this.isHistoryDisabled$=this.activeConnectionQuery.currentChainId$.pipe((0,f.U)(P=>!ao.A[P])),this.setSelectedTableTab=P=>{this.uiService.setSelectedSwapTableTab(1===P.index?"history":"exchanges")},this.currentSpenderService.setCurrentSpenderType(mt.F.swap)}ngOnInit(){const t=this.classicSwapService.init().pipe((0,ne.R)(this.destroy$));(0,v.O)(t,"classicSwapRequests$")}showFullscreenRouting(){const{sourceToken:t,destinationToken:i,routes:a}=this.swapQuery.getValue(),r={sourceToken:t,destinationToken:i,routes:a},c=this.tuiDialogService.open(new io.Al(oo.T,this.injector),{data:r});(0,v.O)(c,"PathfinderRoutePopupComponent open")}getSelectedSwapViewTabIndex(t){return"history"===t?1:0}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(ze.J),e.\u0275\u0275directiveInject(b.uw),e.\u0275\u0275directiveInject(x._),e.\u0275\u0275directiveInject(ut.s),e.\u0275\u0275directiveInject(gt.F),e.\u0275\u0275directiveInject(O.r),e.\u0275\u0275directiveInject(R.a3,2),e.\u0275\u0275directiveInject(Q),e.\u0275\u0275directiveInject(mt.q),e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(k.RO))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-swap-page-container"]],features:[e.\u0275\u0275ProvidersFeature([R.a3])],decls:6,vars:6,consts:[[3,"isGridView"],[1,"right-col"],["class","left-col",4,"ngIf"],[1,"left-col"],["class","charts-box",4,"ngIf"],["class","routing-box","data-id","routing-box",4,"ngIf"],[4,"ngIf"],[1,"charts-box"],["data-id","charts-box",3,"tokensPair"],["data-id","routing-box",1,"routing-box"],[1,"routing-title"],["transloco","swapPage.routing"],["mat-icon-button","","data-id","routing.full-screen-button",3,"click"],["width","16","height","16",1,"text-gray"],[0,"xlink","href","assets/images/icons/fullscreen_2.svg#fullscreen"],[3,"sourceToken","destinationToken","isLoading","routes"],["mat-align-tabs","start",1,"big-tabs",3,"selectedIndex","selectedTabChange"],["mat-tab-label",""],["matTabContent",""],["data-id","swap-table.exchanges-tab","transloco","swapPage.exchanges"],["data-id","swap-table.history-tab"],["transloco","swapPage.swap-history2"],[3,"tokensPair"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"classic-container-page",0),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementStart(2,"div",1),e.\u0275\u0275element(3,"app-market-limit-box"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Jo,7,9,"div",2),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("isGridView",e.\u0275\u0275pipeBind1(1,2,i.isGridView$)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(5,4,i.isGridView$)))},dependencies:[u.O5,so.X,ro.w,C.KI,K.lW,co.Q,U.SP,U.uD,U.uX,U.Vc,po.m,lo.K,Ro,u.Ov,Uo.s],styles:[".routing-title[_ngcontent-%COMP%]{margin-bottom:16px;display:flex;justify-content:space-between;align-items:center}.routing-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px}.routing-title[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{color:var(--1inch-common-btn-bg-01)}.charts-box[_ngcontent-%COMP%]{margin-bottom:16px}.routing-box[_ngcontent-%COMP%], .left-col[_ngcontent-%COMP%]{margin-bottom:32px}@media (max-width: 940px){.left-col[_ngcontent-%COMP%]{margin-top:32px}}"],changeDetection:0}),n})();var qo=o(27147),ea=o(39829);const ta=[{path:"",component:Yo,canActivate:[xn],children:[{path:"",pathMatch:"full",component:class{},canActivate:[wn.D]},{path:":sourceToken/:destinationToken",canActivate:[fn],children:[{path:"",pathMatch:"full",component:Ii},{path:"settings",data:{domain:"classic-swap"},component:jt.q,children:vt.y},{path:"reverse",component:class{},canActivate:[hn]},{path:"select-source-token",component:Ie.D,data:{role:"source"}},{path:"select-destination-token",component:Ie.D,data:{role:"destination"}},{path:"import-token",component:yt.Z}]}]}];let na=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({providers:[Xe],imports:[u.ez,no,St.P,_.Bz.forChild(ta),Se.y,_e.V,C.y4,K.ot,Tt.m,U.Nh,Bt.k,de.m,z.XC,ae.z,oe.TU,b.Is,$e.y,ke.f,$t.K,_t.w,qo.C,It.I,Oe.y,Mt.K,S.ReactiveFormsModule,Pt.Y,ft.h,wt.h,Ee.E,Me.M,Ct.n,xt.a,At.o,bt.P,le.k,Ot.G,Ft.G,B.WD,k.up,kt.G,Et.a,je.l]}),n})();e.\u0275\u0275setComponentScope(qe,function(){return[u.O5,u.RF,u.n9,u.ED,ea.X,cn,Ye]},function(){return[u.Ov]})}}]);